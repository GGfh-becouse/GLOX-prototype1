<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLOX - –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤</title>
    <link rel="icon" type="image/png" href="logomini.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:wght@700&family=Oswald:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* ========== –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò ========== */
        :root {
            /* –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —à—Ä–∏—Ñ—Ç–æ–≤ */
* {
    font-family: inherit;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    font-family: var(--font-main, 'Oswald', sans-serif);
}

/* –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
.widget, 
.widget *,
.world-time,
.time-zone,
.time-display,
.time-city,
.coordinate-grid,
.category-values,
.value-badge,
.mood-emojis,
.quiz-option,
.quiz-btn,
input, button, select, textarea {
    font-family: var(--font-main, 'Oswald', sans-serif) !important;
}

/* –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Ü–∏—Ñ—Ä */
.time-display,
.mood-score,
.slider-value,
.value-badge span {
    font-family: var(--font-main, 'Oswald', sans-serif);
    font-weight: 400;
}
            --primary: #FF6B35;
            --primary-dark: #D45A2C;
            --primary-light: #FF8C5A;
            --primary-glow: rgba(255, 107, 53, 0.3);
            --bg-gradient: linear-gradient(135deg, #121212 0%, #1A1A1A 100%);
            --card-bg: rgba(40, 40, 40, 0.9);
            --border-color: #333333;
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --text-dim: #888888;
            --font-logo: 'Zalando Sans Expanded', sans-serif;
            --font-main: 'Oswald', sans-serif;
            --theme-bg: #121212;
            --theme-card: #1A1A1A;
            --theme-text: #FFFFFF;
            --theme-border: #333333;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
        }
        
        .light-theme {
            --theme-bg: #F8F8F8;
            --theme-card: #FFFFFF;
            --theme-text: #333333;
            --theme-border: #DDDDDD;
            --text-primary: #222222;
            --text-secondary: #555555;
            --text-dim: #777777;
            --card-bg: #FFFFFF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-main);
            font-weight: 400;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        body {
            background: var(--theme-bg);
            color: var(--theme-text);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π */
        .theme-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--theme-border);
            background: var(--card-bg);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .theme-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .theme-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* –õ–æ–≥–æ—Ç–∏–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 10px 0;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .logo-text {
            font-family: var(--font-logo);
            font-weight: 700;
            font-size: 3rem;
            color: var(--primary);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞ */
        .philosophy-quote {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-style: italic;
            margin-bottom: 30px;
            padding: 15px;
            border-top: 1px solid var(--theme-border);
            border-bottom: 1px solid var(--theme-border);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
        }
        
        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .main-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            position: relative;
            max-width: 1200px;
            min-height: 400px;
        }
        
        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥ */
        .glowing-circle {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 4px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 50px var(--primary-glow), 0 0 100px rgba(255, 107, 53, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin: 30px 0;
        }
        
        .glowing-circle::before {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
            animation: pulse 2s infinite alternate ease-in-out;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; transform: scale(0.9); }
            100% { opacity: 0.8; transform: scale(1.2); }
        }
        
        .glowing-circle:hover {
            transform: scale(1.15);
            box-shadow: 0 0 80px var(--primary-glow), 0 0 150px rgba(255, 107, 53, 0.3), inset 0 0 20px rgba(255, 107, 53, 0.1);
            border-width: 5px;
        }
        
        .circle-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 40px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }
        
        .circle-content h2 {
            color: var(--text-primary);
            font-size: 2rem;
            margin-bottom: 5px;
            font-family: var(--font-logo);
            font-weight: 700;
            line-height: 1.2;
        }
        
        .circle-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 3px 0;
            max-width: 90%;
            line-height: 1.4;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            background-color: var(--primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            box-shadow: 0 0 15px var(--primary);
            animation: statusPulse 1.5s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 15px var(--primary); }
            50% { transform: scale(1.2); box-shadow: 0 0 25px var(--primary); }
        }
        
        /* ========== –°–¢–ò–õ–ò –î–õ–Ø –û–ü–†–û–°–ù–ò–ö–ê ========== */
        .fullscreen-quiz {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--theme-bg);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding: 40px 20px;
            overflow-y: auto;
        }
        
        .fullscreen-quiz.active {
            display: block;
            opacity: 1;
        }
        
        .quiz-container {
            max-width: 700px;
            margin: 0 auto;
            padding: 40px;
            background: var(--card-bg);
            border-radius: 20px;
            border: 1px solid var(--theme-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        
        .quiz-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .quiz-title {
            font-family: var(--font-logo);
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .quiz-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .quiz-progress-bar {
            height: 6px;
            background: rgba(255, 107, 53, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .quiz-progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .quiz-category {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--theme-border);
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .category-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary);
        }
        
        .category-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-family: var(--font-logo);
        }
        
        .coordinate-grid {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 20px auto;
            background: var(--card-bg);
            border: 2px solid var(--primary);
            border-radius: 12px;
            cursor: crosshair;
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .grid-axis {
            position: absolute;
            background: rgba(255, 107, 53, 0.2);
            pointer-events: none;
        }
        
        .grid-axis-x {
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            transform: translateY(-50%);
        }
        
        .grid-axis-y {
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            transform: translateX(-50%);
        }
        
        .grid-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border: 3px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px var(--primary);
            transition: all 0.2s ease;
            z-index: 10;
            pointer-events: none;
        }
        
        .grid-labels {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            color: var(--text-dim);
            font-size: 12px;
        }
        
        .slider-container {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 10px;
            border: 1px solid var(--theme-border);
        }
        
        .slider-item {
            margin-bottom: 15px;
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: var(--text-primary);
        }
        
        .slider-value {
            color: var(--primary);
            font-weight: bold;
        }
        
        input[type=range] {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #F44336, #FFC107, #4CAF50);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 10px var(--primary);
        }
        
        .category-values {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 8px;
        }
        
        .value-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 1rem;
        }
        
        .value-x { background: rgba(255, 107, 53, 0.2); color: var(--primary); }
        .value-y { background: rgba(76, 175, 80, 0.2); color: #4CAF50; }
        
        .mood-emojis {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 1.2rem;
        }
        
        .quiz-nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }
        
        .quiz-nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
            font-size: 1rem;
        }
        
        .quiz-nav-btn:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .quiz-nav-btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            opacity: 0.5;
            transform: none;
        }
        
        .quiz-nav-btn.secondary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .quiz-nav-btn.secondary:hover:not(:disabled) {
            background: var(--primary);
            color: white;
        }
        
        .completion-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            color: var(--success);
            padding: 10px;
            background: rgba(76, 175, 80, 0.1);
            border-radius: 8px;
        }
        
        .results-screen {
            text-align: center;
            padding: 30px;
        }
        
        .mood-emoji {
            font-size: 5rem;
            margin: 20px 0;
        }
        
        .mood-score {
            color: var(--primary);
            font-size: 3rem;
            font-family: var(--font-logo);
            margin: 15px 0;
        }
        
        .mood-title {
            font-size: 2rem;
            color: var(--text-primary);
            margin-bottom: 15px;
            font-family: var(--font-logo);
        }
        
        .recommendations {
            background: rgba(255, 107, 53, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border-left: 4px solid var(--primary);
            text-align: left;
        }
        
        .recommendations h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .recommendations ul {
            list-style: none;
        }
        
        .recommendations li {
            padding: 10px 0;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .recommendations li i {
            color: var(--primary);
        }
        
        .category-breakdown {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 10px;
            text-align: left;
        }
        
        .breakdown-item {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
            padding: 8px;
            border-radius: 5px;
        }
        
        /* –í–∏–¥–∂–µ—Ç—ã */
        <!-- –ö–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ -->
<div class="data-controls">
    <button id="exportBtn" class="data-btn" title="–°–∫–∞—á–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã">
        <i class="fas fa-download"></i>
    </button>
    <button id="importBtn" class="data-btn" title="–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã">
        <i class="fas fa-upload"></i>
    </button>
    <input type="file" id="importFile" accept=".json" style="display: none;">
</div>
        .widgets-area {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 40px;
            padding: 25px;
            border-radius: 15px;
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .widget {
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }
        
        .widget:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--theme-border);
        }
        
        .widget-title {
            color: var(--primary);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: var(--font-logo);
            font-weight: 700;
        }
        
        .widget-controls {
            display: flex;
            gap: 5px;
        }
        
        .widget-btn {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .widget-btn:hover {
            border-color: rgba(255, 107, 53, 0.5);
            color: #ff6b35;
        }
        
        .world-time {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .time-zone {
            padding: 15px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 10px;
            border: 1px solid var(--theme-border);
        }
        
        .time-city {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .time-display {
            font-size: 1.5rem;
            color: var(--primary);
            font-family: 'Courier New', monospace;
        }
        
        .add-widget-btn {
            display: block;
            margin: 30px auto;
            padding: 15px 35px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        .add-widget-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        }
        
        .widget-manager {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2000;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .widget-manager.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .manager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--theme-border);
        }
        
        .available-widgets {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .widget-preview {
            padding: 20px;
            background: rgba(255, 107, 53, 0.05);
            border: 2px dashed var(--theme-border);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .widget-preview:hover {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        .glox-history {
            max-width: 800px;
            margin: 50px auto;
            padding: 40px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--theme-border);
        }
        
        .history-title {
            color: var(--primary);
            font-family: var(--font-logo);
            font-size: 2rem;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .history-content {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px 0;
            border-top: 1px solid var(--theme-border);
            color: var(--text-dim);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .widgets-area { grid-template-columns: 1fr; padding: 15px; }
            .world-time { grid-template-columns: 1fr; }
            .quiz-container { padding: 20px; }
            .quiz-nav-buttons { flex-direction: column; }
            .quiz-nav-btn { width: 100%; }
            .logo-container { flex-direction: column; gap: 10px; }
            .logo-text { font-size: 2.2rem; }
            .glox-history { padding: 20px; }
            .coordinate-grid { width: 200px; height: 200px; }
        }
    </style>
</head>
<body>
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π -->
    <div class="theme-controls">
        <button class="theme-btn active" id="darkThemeBtn">
            <i class="fas fa-moon"></i>
        </button>
        <button class="theme-btn" id="lightThemeBtn">
            <i class="fas fa-sun"></i>
        </button>
    </div>
    
    <!-- –õ–æ–≥–æ—Ç–∏–ø -->
    <div class="logo-container">
        <div class="logo-icon">G</div>
        <h1 class="logo-text">GLOX</h1>
    </div>
    
    <!-- –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞ -->
    <div class="philosophy-quote">
        "–í—Å–µ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç"
    </div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <main class="main-screen">
        <div class="glowing-circle" id="mainCircle">
            <div class="circle-content">
                <div class="status-indicator"></div>
                <h2>–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
            </div>
        </div>
        
        <div class="glowing-circle hidden" id="resultCircle">
            <div class="circle-content">
                <div id="resultEmoji" class="mood-emoji"></div>
                <h2 id="resultTitle"></h2>
                <p id="resultScore" class="mood-score"></p>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞</p>
            </div>
        </div>
    </main>
    
    <!-- –û–ø—Ä–æ—Å–Ω–∏–∫ -->
    <div class="fullscreen-quiz" id="quizScreen">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2 class="quiz-title">–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p class="quiz-subtitle">–û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ —Ç—Ä—ë–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</p>
                <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" id="quizProgress"></div>
                </div>
            </div>
            
            <div id="quizContent"></div>
            
            <div class="quiz-nav-buttons">
                <button class="quiz-nav-btn secondary" id="prevBtn" disabled>
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <button class="quiz-nav-btn" id="nextBtn">
                    –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                </button>
                <button class="quiz-nav-btn" id="submitBtn" style="display: none;">
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å <i class="fas fa-check"></i>
                </button>
            </div>
            
            <div class="completion-indicator" id="completionIndicator" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span>–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ü–µ–Ω–µ–Ω—ã</span>
            </div>
        </div>
    </div>
    
    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ -->
    <div class="fullscreen-quiz" id="resultsScreen">
        <div class="quiz-container">
            <div class="results-screen">
                <h2 class="mood-title">–í–ê–® –†–ï–ó–£–õ–¨–¢–ê–¢</h2>
                <div id="finalMoodEmoji" class="mood-emoji"></div>
                <div id="finalScore" class="mood-score"></div>
                
                <div class="recommendations">
                    <h4>–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ù–ê –î–ï–ù–¨</h4>
                    <ul id="recommendationsList"></ul>
                </div>
                
                <div class="category-breakdown" id="categoryBreakdown"></div>
                
                <button class="quiz-btn" id="closeResultsBtn">
                    <i class="fas fa-check"></i> –ó–ê–í–ï–†–®–ò–¢–¨
                </button>
                
                <button class="quiz-btn" id="redoQuizBtn" style="margin-top: 10px; background: transparent; border: 2px solid var(--primary);">
                    <i class="fas fa-redo"></i> –ü–†–û–ô–¢–ò –ó–ê–ù–û–í–û
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–æ—Å–∞ -->
    <div class="fullscreen-quiz" id="psychQuizScreen">
        <div class="quiz-container" style="max-width: 800px;">
            <div class="quiz-header">
                <h2 class="quiz-title">–ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï</h2>
                <p class="quiz-subtitle" id="psychQuizSubtitle">–ë–∞–∑–æ–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞</p>
                <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" id="psychQuizProgress" style="width: 0%;"></div>
                </div>
            </div>
            
            <div id="psychQuizContent"></div>
            
            <div class="quiz-nav-buttons">
                <button class="quiz-nav-btn secondary" id="psychPrevBtn" disabled>
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <button class="quiz-nav-btn" id="psychNextBtn">
                    –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                </button>
                <button class="quiz-nav-btn" id="psychSubmitBtn" style="display: none;">
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å <i class="fas fa-check"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ -->
    <div class="fullscreen-quiz" id="psychResultsScreen">
        <div class="quiz-container">
            <div class="results-screen">
                <h2 class="mood-title">–†–ï–ó–£–õ–¨–¢–ê–¢–´ –û–¶–ï–ù–ö–ò</h2>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 30px 0;">
                    <div style="background: rgba(255,107,53,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 10px;">
                            <i class="fas fa-map-marker-alt"></i> –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
                        </div>
                        <div style="display: flex; justify-content: space-around;">
                            <div>
                                <span style="color: var(--primary); font-size: 1.5rem;" id="finalX">0.0</span>
                                <span style="color: var(--text-dim);"> X</span>
                            </div>
                            <div>
                                <span style="color: var(--primary); font-size: 1.5rem;" id="finalY">0.0</span>
                                <span style="color: var(--text-dim);"> Y</span>
                            </div>
                        </div>
                    </div>
                    
                    <div style="background: rgba(255,107,53,0.1); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 1.2rem; color: var(--text-secondary); margin-bottom: 10px;">
                            <i class="fas fa-bolt"></i> –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ
                        </div>
                        <div style="font-size: 1.5rem; color: var(--primary);" id="tensionIndex">0.0</div>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; color: #4CAF50;" id="confidenceValue">0%</div>
                        <div style="color: var(--text-dim);">–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</div>
                    </div>
                    <div style="text-align: center;">
                        <div style="font-size: 2.5rem; color: #F44336;" id="instabilityValue">0%</div>
                        <div style="color: var(--text-dim);">–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å</div>
                    </div>
                </div>
                
                <div style="margin: 20px 0;" id="statusMessages"></div>
                
                <div style="background: rgba(255,107,53,0.05); padding: 15px; border-radius: 8px; margin: 20px 0;">
                    <span style="color: var(--text-dim);">–ì–ª—É–±–∏–Ω–∞ —É—Ç–æ—á–Ω–µ–Ω–∏–π: </span>
                    <span style="color: var(--primary); font-weight: bold;" id="clarificationDepth">0</span>
                </div>
                
                <button class="quiz-btn" id="closePsychResultsBtn">
                    <i class="fas fa-check"></i> –ó–ê–í–ï–†–®–ò–¢–¨
                </button>
                
                <button class="quiz-btn" id="redoPsychQuizBtn" style="margin-top: 10px; background: transparent; border: 2px solid var(--primary);">
                    <i class="fas fa-redo"></i> –ü–†–û–ô–¢–ò –ó–ê–ù–û–í–û
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞–º–∏ -->
    <button class="add-widget-btn" id="addWidgetBtn">
        <i class="fas fa-layer-group"></i> –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ñ–ï–¢–ê–ú–ò
    </button>
    
    <!-- –í–∏–¥–∂–µ—Ç—ã -->
    <div class="widgets-area" id="widgetsArea">
        <!-- –ó–∞–¥–∞—á–∏ -->
        <div class="widget" id="tasksWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-tasks"></i> –ó–ê–î–ê–ß–ò</h3>
                <div class="widget-controls">
                    <button class="widget-btn add-task-btn"><i class="fas fa-plus"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="widget-content" id="tasksContent"></div>
        </div>
        
        <!-- –ú–∏—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è -->
        <div class="widget" id="worldTimeWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-globe"></i> –ú–ò–†–û–í–û–ï –í–†–ï–ú–Ø</h3>
                <div class="widget-controls">
                    <button class="widget-btn refresh-time-btn"><i class="fas fa-sync-alt"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="world-time" id="worldTimeContent"></div>
        </div>
        
        <!-- –°–æ–≤–µ—Ç—ã -->
        <div class="widget" id="recWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-lightbulb"></i> –°–û–í–ï–¢–´ GLOX</h3>
                <div class="widget-controls">
                    <button class="widget-btn refresh-btn"><i class="fas fa-sync-alt"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="widget-content" id="recContent"></div>
        </div>
        
        <!-- –í–∏–¥–∂–µ—Ç –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è -->
        <div class="widget" id="psychologicalWidget">
            <div class="widget-header">
                <h3 class="widget-title">
                    <i class="fas fa-brain"></i> –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï
                </h3>
                <div class="widget-controls">
                    <button class="widget-btn start-psych-btn" id="startPsychBtn">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="widget-btn refresh-psych-btn" id="refreshPsychBtn" style="display: none;">
                        <i class="fas fa-redo"></i>
                    </button>
                    <button class="widget-btn close-btn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="widget-content" id="psychologicalContent">
                <div style="text-align: center; padding: 20px;">
                    <i class="fas fa-brain" style="font-size: 3rem; color: var(--primary); margin-bottom: 15px;"></i>
                    <p style="margin-bottom: 20px; color: var(--text-secondary);">
                        –û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
                    </p>
                    <button class="quiz-btn" id="startPsychologicalBtn" style="width: 100%;">
                        <i class="fas fa-play"></i> –ù–ê–ß–ê–¢–¨ –û–¶–ï–ù–ö–£
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤ -->
    <div class="widget-manager" id="widgetManager">
        <div class="manager-header">
            <h2 style="color: var(--primary); font-family: var(--font-logo);">
                <i class="fas fa-layer-group"></i> –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ñ–ï–¢–ê–ú–ò
            </h2>
            <button class="quiz-btn" id="closeManagerBtn" style="padding: 8px 20px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <p style="color: var(--text-secondary); margin-bottom: 20px;">
            –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ:
        </p>
        
        <div class="available-widgets" id="availableWidgets"></div>
    </div>
    
    <!-- –ò—Å—Ç–æ—Ä–∏—è -->
    <div class="glox-history">
        <h2 class="history-title">–ü–£–¢–¨ GLOX</h2>
        <div class="history-content">
            <p>–ü—Ä–æ–µ–∫—Ç GLOX –≤—ã—Ä–æ—Å –∏–∑ ¬´–ó–∞–∫–æ–Ω–∞ –í–æ–ª—Ç–µ—Ä–∞¬ª ‚Äî –∏–¥–µ–∏ –æ —Ç–æ–º, —á—Ç–æ –º–∏—Ä –∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –∏—Å—Ö–æ–¥–∞–º–∏ –∏ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∫—Ä—ã—Ç—ã–µ –≤–µ—Ç–≤–∏ —Ä–∞–∑–≤–∏—Ç–∏—è.</p>
            <p>–û—Ç —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–æ–π –º–æ–¥–µ–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–µ—Ä–µ—à–ª–∞ –≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É: —Å–Ω–∞—á–∞–ª–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ü–û, –∑–∞—Ç–µ–º –∫–∞–∫ —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
        </div>
    </div>
    
    <!-- –§—É—Ç–µ—Ä -->
    <div class="footer">
        GLOX ¬© 2026. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </div>

    <script>
        // ========== –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –û–ü–†–û–°–û–í ==========
        const wellBeingQuiz = {
            categories: [
                { 
                    id: 'sleep', 
                    name: '–°–û–ù', 
                    icon: 'üò¥',
                    x: 0, 
                    y: 0,
                    questions: [
                        '–ö–∞–∫ –≤—ã —Å–ø–∞–ª–∏ –ø—Ä–æ—à–ª–æ–π –Ω–æ—á—å—é?',
                        '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã —Å–µ–±—è –æ—Ç–¥–æ—Ö–Ω—É–≤—à–∏–º?',
                        '–ë—ã–ª–∏ –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞—Å—ã–ø–∞–Ω–∏–µ–º?'
                    ]
                },
                { 
                    id: 'mood', 
                    name: '–ù–ê–°–¢–†–û–ï–ù–ò–ï', 
                    icon: 'üòä',
                    x: 0, 
                    y: 0,
                    questions: [
                        '–ö–∞–∫–æ–µ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–µ–π—á–∞—Å?',
                        '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å?',
                        '–ï—Å—Ç—å –ª–∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å?'
                    ]
                },
                { 
                    id: 'physical', 
                    name: '–§–ò–ó–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï', 
                    icon: 'üí™',
                    x: 0, 
                    y: 0,
                    questions: [
                        '–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ —Å–≤–æ–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ?',
                        '–ï—Å—Ç—å –ª–∏ –±–æ–ª—å –∏–ª–∏ –¥–∏—Å–∫–æ–º—Ñ–æ—Ä—Ç?',
                        '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã –ø—Ä–∏–ª–∏–≤ —ç–Ω–µ—Ä–≥–∏–∏?'
                    ]
                }
            ],
            
            recommendations: {
                perfect: {
                    title: "–ò–î–ï–ê–õ–¨–ù–û!",
                    emoji: "üåü",
                    minScore: 12,
                    tips: [
                        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á",
                        "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º —Å –¥—Ä—É–≥–∏–º–∏",
                        "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –Ω–∞ –≤–µ—á–µ—Ä",
                        "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤–æ–µ —Ö–æ–±–±–∏"
                    ]
                },
                good: {
                    title: "–•–û–†–û–®–û",
                    emoji: "üòä",
                    minScore: 9,
                    tips: [
                        "–°–æ—Å—Ç–∞–≤—å—Ç–µ –ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å",
                        "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å",
                        "–°–¥–µ–ª–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ–≥—É–ª–∫—É",
                        "–ü–æ–æ–±—â–∞–π—Ç–µ—Å—å —Å –±–ª–∏–∑–∫–∏–º–∏"
                    ]
                },
                normal: {
                    title: "–ù–û–†–ú–ê–õ–¨–ù–û",
                    emoji: "üôÇ",
                    minScore: 6,
                    tips: [
                        "–ù–∞—á–Ω–∏—Ç–µ —Å –ª—ë–≥–∫–∏—Ö –∑–∞–¥–∞—á",
                        "–°–¥–µ–ª–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤",
                        "–ü–æ—Å–ª—É—à–∞–π—Ç–µ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É",
                        "–í—ã–ø–µ–π—Ç–µ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π"
                    ]
                },
                low: {
                    title: "–¢–†–ï–í–û–ñ–ù–û",
                    emoji: "üòî",
                    minScore: 0,
                    tips: [
                        "–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ 15-20 –º–∏–Ω—É—Ç",
                        "–í—ã–ø–µ–π—Ç–µ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π",
                        "–°–¥–µ–ª–∞–π—Ç–µ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è",
                        "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å –∫–µ–º-—Ç–æ –±–ª–∏–∑–∫–∏–º"
                    ]
                }
            },
            
            calculateTotalScore() {
                let totalX = 0, totalY = 0;
                this.categories.forEach(cat => {
                    totalX += cat.x;
                    totalY += cat.y;
                });
                return ((totalX + totalY) / 6 * 15).toFixed(1);
            },
            
            getResultByScore(score) {
                const numScore = parseFloat(score);
                if (numScore >= 12) return this.recommendations.perfect;
                if (numScore >= 9) return this.recommendations.good;
                if (numScore >= 6) return this.recommendations.normal;
                return this.recommendations.low;
            },
            
            getColorForValue(value) {
                const colors = ['#F44336', '#FF5722', '#FFC107', '#8BC34A', '#4CAF50'];
                const index = Math.floor((value + 5) / 2.5);
                return colors[Math.min(4, Math.max(0, index))];
            }
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let currentCategoryIndex = 0;
        let lastQuizResult = null;

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤–∏–¥–∂–µ—Ç–æ–≤
        const appData = {
            activeWidgets: ['tasks', 'worldTime', 'recommendations', 'psychological'],
            availableWidgets: [
                { id: 'tasks', name: '–ó–∞–¥–∞—á–∏', icon: 'fas fa-tasks', description: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏' },
                { id: 'worldTime', name: '–ú–∏—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è', icon: 'fas fa-globe', description: '–í—Ä–µ–º—è –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö' },
                { id: 'recommendations', name: '–°–æ–≤–µ—Ç—ã GLOX', icon: 'fas fa-lightbulb', description: '–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏' },
                { id: 'psychological', name: '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ', icon: 'fas fa-brain', description: '–û—Ü–µ–Ω–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –º–µ—Ç—Ä–∏–∫–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏' }
            ],
            tasks: [
                { id: 1, text: '–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è –≤ GLOX', completed: false },
                { id: 2, text: '–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã', completed: false },
                { id: 3, text: '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É', completed: false }
            ],
            recommendations: [
                { title: '–ù–∞—á–Ω–∏—Ç–µ –¥–µ–Ω—å —Å —Ç–µ—Å—Ç–∞ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è', description: '–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', icon: 'fas fa-heartbeat' },
                { title: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—ë–º–Ω—É—é —Ç–µ–º—É –≤–µ—á–µ—Ä–æ–º', description: '–î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≥–ª–∞–∑–∞', icon: 'fas fa-moon' },
                { title: '–§–∏–ª–æ—Å–æ—Ñ–∏—è GLOX', description: '–ü–æ–º–Ω–∏—Ç–µ: –≤—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç', icon: 'fas fa-brain' }
            ]
        };

        // ========== –í–ò–î–ñ–ï–¢ –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–û–ì–û –°–û–°–¢–û–Ø–ù–ò–Ø ==========
        const gloxSessionState = {
            sessionId: 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9),
            startedAt: null,
            finishedAt: null,
            
            baseCoordinates: {
                x: 0,
                y: 0
            },
            
            surveys: [
                {
                    surveyId: 'sleep_survey',
                    topic: '–°–æ–Ω –∏ –æ—Ç–¥—ã—Ö',
                    questions: [
                        { questionId: 'sleep_1', questionText: '–ö–∞–∫ –≤—ã —Å–ø–∞–ª–∏ –ø—Ä–æ—à–ª–æ–π –Ω–æ—á—å—é?', answersHistory: [], finalValue: null, changesCount: 0 },
                        { questionId: 'sleep_2', questionText: '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã —Å–µ–±—è –æ—Ç–¥–æ—Ö–Ω—É–≤—à–∏–º?', answersHistory: [], finalValue: null, changesCount: 0 },
                        { questionId: 'sleep_3', questionText: '–ë—ã–ª–∏ –ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞—Å—ã–ø–∞–Ω–∏–µ–º?', answersHistory: [], finalValue: null, changesCount: 0 }
                    ],
                    startedAt: null,
                    finishedAt: null
                },
                {
                    surveyId: 'anxiety_survey',
                    topic: '–¢—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å',
                    questions: [
                        { questionId: 'anxiety_1', questionText: '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ?', answersHistory: [], finalValue: null, changesCount: 0 },
                        { questionId: 'anxiety_2', questionText: '–ö–∞–∫ —á–∞—Å—Ç–æ –≤—ã –¥—É–º–∞–µ—Ç–µ –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö?', answersHistory: [], finalValue: null, changesCount: 0 }
                    ],
                    startedAt: null,
                    finishedAt: null
                },
                {
                    surveyId: 'energy_survey',
                    topic: '–≠–Ω–µ—Ä–≥–∏—è –∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è',
                    questions: [
                        { questionId: 'energy_1', questionText: '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã –ø—Ä–∏–ª–∏–≤ —Å–∏–ª?', answersHistory: [], finalValue: null, changesCount: 0 },
                        { questionId: 'energy_2', questionText: '–ï—Å—Ç—å –ª–∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è —á—Ç–æ-—Ç–æ –¥–µ–ª–∞—Ç—å?', answersHistory: [], finalValue: null, changesCount: 0 }
                    ],
                    startedAt: null,
                    finishedAt: null
                }
            ],
            
            metrics: {
                confidence: 0,
                instability: 0,
                clarificationDepth: 0
            }
        };

        const questionsConfig = {
            sleep_1: { options: [
                { value: -2, label: 'üò¥ –û—á–µ–Ω—å –ø–ª–æ—Ö–æ', impact: { xDelta: -2, yDelta: -1 } },
                { value: -1, label: 'üòû –ü–ª–æ—Ö–æ', impact: { xDelta: -1, yDelta: 0 } },
                { value: 0, label: 'üòê –ù–æ—Ä–º–∞–ª—å–Ω–æ', impact: { xDelta: 0, yDelta: 0 } },
                { value: 1, label: 'üôÇ –•–æ—Ä–æ—à–æ', impact: { xDelta: 1, yDelta: 0.5 } },
                { value: 2, label: 'üòä –û—Ç–ª–∏—á–Ω–æ', impact: { xDelta: 2, yDelta: 1 } }
            ]},
            sleep_2: { options: [
                { value: -2, label: 'üò¥ –°–æ–≤—Å–µ–º –Ω–µ—Ç', impact: { xDelta: -1, yDelta: -2 } },
                { value: -1, label: 'üòû –ù–µ–º–Ω–æ–≥–æ', impact: { xDelta: 0, yDelta: -1 } },
                { value: 0, label: 'üòê –°—Ä–µ–¥–Ω–µ', impact: { xDelta: 0, yDelta: 0 } },
                { value: 1, label: 'üôÇ –•–æ—Ä–æ—à–æ', impact: { xDelta: 0.5, yDelta: 1 } },
                { value: 2, label: 'üòä –û—Ç–ª–∏—á–Ω–æ', impact: { xDelta: 1, yDelta: 2 } }
            ]},
            sleep_3: { options: [
                { value: -2, label: 'üòû –ß–∞—Å—Ç–æ', impact: { xDelta: -1, yDelta: -1 } },
                { value: -1, label: 'üòê –ò–Ω–æ–≥–¥–∞', impact: { xDelta: -0.5, yDelta: 0 } },
                { value: 1, label: 'üôÇ –†–µ–¥–∫–æ', impact: { xDelta: 0.5, yDelta: 0.5 } },
                { value: 2, label: 'üòä –ù–∏–∫–æ–≥–¥–∞', impact: { xDelta: 1, yDelta: 1 } }
            ]},
            anxiety_1: { options: [
                { value: -2, label: 'üò∞ –°–∏–ª—å–Ω–æ–µ', impact: { xDelta: -2, yDelta: -1 } },
                { value: -1, label: 'üòü –£–º–µ—Ä–µ–Ω–Ω–æ–µ', impact: { xDelta: -1, yDelta: 0 } },
                { value: 0, label: 'üòê –°–ª–∞–±–æ–µ', impact: { xDelta: 0, yDelta: 0 } },
                { value: 1, label: 'üôÇ –ù–µ—Ç', impact: { xDelta: 1, yDelta: 0.5 } }
            ]},
            anxiety_2: { options: [
                { value: -2, label: 'üò∞ –ü–æ—Å—Ç–æ—è–Ω–Ω–æ', impact: { xDelta: -2, yDelta: -1 } },
                { value: -1, label: 'üòü –ß–∞—Å—Ç–æ', impact: { xDelta: -1, yDelta: -0.5 } },
                { value: 0, label: 'üòê –ò–Ω–æ–≥–¥–∞', impact: { xDelta: 0, yDelta: 0 } },
                { value: 1, label: 'üôÇ –†–µ–¥–∫–æ', impact: { xDelta: 0.5, yDelta: 0.5 } }
            ]},
            energy_1: { options: [
                { value: -2, label: 'üò¥ –ù–µ—Ç —Å–∏–ª', impact: { xDelta: -1, yDelta: -2 } },
                { value: -1, label: 'üòû –ú–∞–ª–æ', impact: { xDelta: 0, yDelta: -1 } },
                { value: 0, label: 'üòê –°—Ä–µ–¥–Ω–µ', impact: { xDelta: 0, yDelta: 0 } },
                { value: 1, label: 'üôÇ –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ', impact: { xDelta: 0.5, yDelta: 1 } },
                { value: 2, label: '‚ö° –ú–Ω–æ–≥–æ', impact: { xDelta: 1, yDelta: 2 } }
            ]},
            energy_2: { options: [
                { value: -2, label: 'üòû –ù–µ—Ç', impact: { xDelta: -1, yDelta: -1 } },
                { value: -1, label: 'üòê –°–ª–∞–±–∞—è', impact: { xDelta: -0.5, yDelta: 0 } },
                { value: 1, label: 'üôÇ –ï—Å—Ç—å', impact: { xDelta: 0.5, yDelta: 0.5 } },
                { value: 2, label: '‚ö° –°–∏–ª—å–Ω–∞—è', impact: { xDelta: 1, yDelta: 1 } }
            ]}
        };

        let psychCurrentStep = 'base';
        let psychCurrentSurveyIndex = 0;
        let psychCurrentQuestionIndex = 0;

        // ========== –§–£–ù–ö–¶–ò–ò –¢–ï–ú–´ ==========
        function initTheme() {
            const darkBtn = document.getElementById('darkThemeBtn');
            const lightBtn = document.getElementById('lightThemeBtn');
            
            if (!darkBtn || !lightBtn) return;
            
            const savedTheme = localStorage.getItem('gloxTheme') || 'dark';
            if (savedTheme === 'light') {
                document.body.classList.add('light-theme');
                darkBtn.classList.remove('active');
                lightBtn.classList.add('active');
            }
            
            darkBtn.addEventListener('click', () => {
                document.body.classList.remove('light-theme');
                darkBtn.classList.add('active');
                lightBtn.classList.remove('active');
                localStorage.setItem('gloxTheme', 'dark');
            });
            
            lightBtn.addEventListener('click', () => {
                document.body.classList.add('light-theme');
                lightBtn.classList.add('active');
                darkBtn.classList.remove('active');
                localStorage.setItem('gloxTheme', 'light');
            });
        }

        // ========== –§–£–ù–ö–¶–ò–ò –û–ü–†–û–°–ù–ò–ö–ê ==========
        function renderCurrentCategory() {
            const container = document.getElementById('quizContent');
            if (!container) return;
            
            container.innerHTML = '';
            
            const category = wellBeingQuiz.categories[currentCategoryIndex];
            
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'quiz-category';
            
            const header = document.createElement('div');
            header.className = 'category-header';
            header.innerHTML = `
                <div class="category-icon">${category.icon}</div>
                <div class="category-title">${category.name}</div>
            `;
            categoryDiv.appendChild(header);
            
            const grid = createCoordinateGrid(category);
            categoryDiv.appendChild(grid);
            
            const sliders = createSliders(category);
            categoryDiv.appendChild(sliders);
            
            container.appendChild(categoryDiv);
            
            updateNavigationButtons();
            updateProgress();
        }

        function createCoordinateGrid(category) {
            const gridSize = 250;
            const half = gridSize / 2;
            
            const gridDiv = document.createElement('div');
            gridDiv.className = 'coordinate-grid';
            
            const xAxis = document.createElement('div');
            xAxis.className = 'grid-axis grid-axis-x';
            const yAxis = document.createElement('div');
            yAxis.className = 'grid-axis grid-axis-y';
            
            const marker = document.createElement('div');
            marker.className = 'grid-marker';
            
            const labels = document.createElement('div');
            labels.className = 'grid-labels';
            labels.innerHTML = `
                <div style="position: absolute; top: 5px; left: 50%; transform: translateX(-50%);">üòä –•–æ—Ä–æ—à–æ</div>
                <div style="position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%);">üòû –ü–ª–æ—Ö–æ</div>
                <div style="position: absolute; left: 5px; top: 50%; transform: translateY(-50%);">üò¥ –¢—è–∂–µ–ª–æ</div>
                <div style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%);">‚ö° –õ–µ–≥–∫–æ</div>
            `;
            
            gridDiv.appendChild(xAxis);
            gridDiv.appendChild(yAxis);
            gridDiv.appendChild(labels);
            gridDiv.appendChild(marker);
            
            function updateMarkerPosition() {
                const left = half + (category.x / 5) * half;
                const top = half - (category.y / 5) * half;
                marker.style.left = `${Math.min(gridSize, Math.max(0, left))}px`;
                marker.style.top = `${Math.min(gridSize, Math.max(0, top))}px`;
                marker.style.background = wellBeingQuiz.getColorForValue((category.x + category.y) / 2);
            }
            
            gridDiv.addEventListener('click', (e) => {
                const rect = gridDiv.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                let newX = ((x / gridSize) * 10 - 5).toFixed(1);
                let newY = ((1 - y / gridSize) * 10 - 5).toFixed(1);
                
                newX = Math.min(5, Math.max(-5, parseFloat(newX)));
                newY = Math.min(5, Math.max(-5, parseFloat(newY)));
                
                category.x = newX;
                category.y = newY;
                
                updateMarkerPosition();
                updateCategoryDisplay(category);
                showClarifyingQuestion(category);
            });
            
            updateMarkerPosition();
            return gridDiv;
        }

        function createSliders(category) {
            const container = document.createElement('div');
            container.className = 'slider-container';
            
            const xSlider = createSliderItem('–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ', category.x, -5, 5, (value) => {
                category.x = value;
                updateCategoryDisplay(category);
                updateGridMarker(category);
            });
            
            const ySlider = createSliderItem('–≠–Ω–µ—Ä–≥–∏—è', category.y, -5, 5, (value) => {
                category.y = value;
                updateCategoryDisplay(category);
                updateGridMarker(category);
            });
            
            container.appendChild(xSlider);
            container.appendChild(ySlider);
            
            const valuesDiv = document.createElement('div');
            valuesDiv.className = 'category-values';
            container.appendChild(valuesDiv);
            
            const emojiDiv = document.createElement('div');
            emojiDiv.className = 'mood-emojis';
            container.appendChild(emojiDiv);
            
            updateCategoryDisplay(category);
            
            return container;
        }

        function createSliderItem(label, value, min, max, onChange) {
            const container = document.createElement('div');
            container.className = 'slider-item';
            
            const labelDiv = document.createElement('div');
            labelDiv.className = 'slider-label';
            labelDiv.innerHTML = `
                <span>${label}</span>
                <span class="slider-value">${value.toFixed(1)}</span>
            `;
            
            const input = document.createElement('input');
            input.type = 'range';
            input.min = min;
            input.max = max;
            input.step = 0.1;
            input.value = value;
            
            input.addEventListener('input', (e) => {
                const val = parseFloat(e.target.value);
                labelDiv.querySelector('.slider-value').textContent = val.toFixed(1);
                onChange(val);
            });
            
            container.appendChild(labelDiv);
            container.appendChild(input);
            
            return container;
        }

        function updateCategoryDisplay(category) {
            const container = document.querySelector('.quiz-category');
            if (!container) return;
            
            const valuesDiv = container.querySelector('.category-values');
            if (valuesDiv) {
                const xColor = wellBeingQuiz.getColorForValue(category.x);
                const yColor = wellBeingQuiz.getColorForValue(category.y);
                
                valuesDiv.innerHTML = `
                    <div class="value-badge value-x" style="background: ${xColor}20; color: ${xColor};">
                        <i class="fas fa-heart"></i> ${category.x.toFixed(1)}
                    </div>
                    <div class="value-badge value-y" style="background: ${yColor}20; color: ${yColor};">
                        <i class="fas fa-bolt"></i> ${category.y.toFixed(1)}
                    </div>
                `;
            }
            
            const emojiDiv = container.querySelector('.mood-emojis');
            if (emojiDiv) {
                const avgValue = (category.x + category.y) / 2;
                let moodEmoji = 'üòê';
                if (avgValue >= 3) moodEmoji = 'üòä';
                else if (avgValue >= 0) moodEmoji = 'üôÇ';
                else if (avgValue >= -3) moodEmoji = 'üòï';
                else moodEmoji = 'üòû';
                
                emojiDiv.innerHTML = `
                    <span>${moodEmoji}</span>
                    <span>${category.icon}</span>
                    <span>${avgValue >= 0 ? 'üëç' : 'üëé'}</span>
                `;
            }
        }

        function updateGridMarker(category) {
            const grid = document.querySelector('.coordinate-grid');
            if (!grid) return;
            
            const marker = grid.querySelector('.grid-marker');
            const half = 125;
            const left = half + (category.x / 5) * half;
            const top = half - (category.y / 5) * half;
            
            marker.style.left = `${Math.min(250, Math.max(0, left))}px`;
            marker.style.top = `${Math.min(250, Math.max(0, top))}px`;
            marker.style.background = wellBeingQuiz.getColorForValue((category.x + category.y) / 2);
        }

        function showClarifyingQuestion(category) {
            const randomQuestion = category.questions[Math.floor(Math.random() * category.questions.length)];
            
            const questionDiv = document.createElement('div');
            questionDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--card-bg);
                padding: 25px;
                border-radius: 15px;
                border: 2px solid var(--primary);
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                z-index: 1100;
                max-width: 400px;
                width: 90%;
                text-align: center;
            `;
            
            questionDiv.innerHTML = `
                <h3 style="color: var(--primary); margin-bottom: 15px;">–£—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å</h3>
                <p style="font-size: 1.2rem; margin-bottom: 20px;">${randomQuestion}</p>
                <button class="quiz-btn" onclick="this.closest('div').remove()" style="margin: 0 auto;">–ü–æ–Ω—è—Ç–Ω–æ</button>
            `;
            
            document.body.appendChild(questionDiv);
            
            setTimeout(() => {
                if (questionDiv.parentNode) questionDiv.remove();
            }, 4000);
        }

        function updateNavigationButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const submitBtn = document.getElementById('submitBtn');
            
            if (!prevBtn || !nextBtn || !submitBtn) return;
            
            prevBtn.disabled = currentCategoryIndex === 0;
            
            if (currentCategoryIndex === wellBeingQuiz.categories.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
            
            const allRated = wellBeingQuiz.categories.every(cat => cat.x !== 0 || cat.y !== 0);
            const indicator = document.getElementById('completionIndicator');
            if (indicator) indicator.style.display = allRated ? 'flex' : 'none';
        }

        function updateProgress() {
            const progress = ((currentCategoryIndex + 1) / wellBeingQuiz.categories.length) * 100;
            const progressBar = document.getElementById('quizProgress');
            if (progressBar) progressBar.style.width = `${progress}%`;
        }

        function showResults() {
            const totalScore = wellBeingQuiz.calculateTotalScore();
            const result = wellBeingQuiz.getResultByScore(totalScore);
            
            document.getElementById('quizScreen').classList.remove('active');
            document.getElementById('resultsScreen').classList.add('active');
            
            document.getElementById('finalMoodEmoji').textContent = result.emoji;
            document.getElementById('finalScore').textContent = `${totalScore}/15`;
            
            const list = document.getElementById('recommendationsList');
            if (list) {
                list.innerHTML = '';
                result.tips.forEach(tip => {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fas fa-check-circle"></i> ${tip}`;
                    list.appendChild(li);
                });
            }
            
            const breakdown = document.getElementById('categoryBreakdown');
            if (breakdown) {
                breakdown.innerHTML = '<h4 style="color: var(--primary); margin-bottom: 10px;">–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä:</h4>';
                
                wellBeingQuiz.categories.forEach(cat => {
                    const avg = ((cat.x + cat.y) / 2).toFixed(1);
                    const color = wellBeingQuiz.getColorForValue(parseFloat(avg));
                    breakdown.innerHTML += `
                        <div class="breakdown-item" style="background: ${color}10;">
                            <span>${cat.icon} ${cat.name}:</span>
                            <span style="color: ${color}; font-weight: bold;">${avg}</span>
                        </div>
                    `;
                });
            }
            
            lastQuizResult = {
                score: totalScore,
                title: result.title,
                emoji: result.emoji
            };
        }

        function resetQuiz() {
            wellBeingQuiz.categories.forEach(cat => {
                cat.x = 0;
                cat.y = 0;
            });
            currentCategoryIndex = 0;
            
            document.getElementById('resultsScreen').classList.remove('active');
            document.getElementById('quizScreen').classList.remove('active');
            document.body.style.overflow = 'auto';
            
            document.getElementById('mainCircle').classList.remove('hidden');
            document.getElementById('resultCircle').classList.add('hidden');
        }

        function showResultCircle() {
            if (!lastQuizResult) return;
            
            document.getElementById('resultEmoji').textContent = lastQuizResult.emoji;
            document.getElementById('resultTitle').textContent = lastQuizResult.title;
            document.getElementById('resultScore').textContent = `${lastQuizResult.score}/15`;
            
            document.getElementById('mainCircle').classList.add('hidden');
            document.getElementById('resultCircle').classList.remove('hidden');
        }

        // ========== –§–£–ù–ö–¶–ò–ò –í–ò–î–ñ–ï–¢–û–í ==========
        function initTasksWidget() {
            const tasksContent = document.getElementById('tasksContent');
            if (!tasksContent) return;
            
            function renderTasks() {
                tasksContent.innerHTML = '';
                appData.tasks.forEach(task => {
                    const taskItem = document.createElement('div');
                    taskItem.style.cssText = 'display: flex; align-items: center; gap: 15px; padding: 12px; margin-bottom: 10px; background: rgba(255, 107, 53, 0.05); border-radius: 8px;';
                    
                    taskItem.innerHTML = `
                        <input type="checkbox" ${task.completed ? 'checked' : ''} 
                               style="width: 20px; height: 20px; cursor: pointer;">
                        <div style="flex: 1; ${task.completed ? 'text-decoration: line-through; color: var(--text-dim);' : ''}">
                            ${task.text}
                        </div>
                    `;
                    
                    const checkbox = taskItem.querySelector('input');
                    checkbox.addEventListener('change', function() {
                        task.completed = this.checked;
                        renderTasks();
                    });
                    
                    tasksContent.appendChild(taskItem);
                });
            }
            
            document.querySelector('#tasksWidget .add-task-btn')?.addEventListener('click', function() {
                const taskText = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:');
                if (taskText) {
                    appData.tasks.push({
                        id: Date.now(),
                        text: taskText,
                        completed: false
                    });
                    renderTasks();
                }
            });
            
            renderTasks();
        }

        function initWorldTimeWidget() {
            const content = document.getElementById('worldTimeContent');
            if (!content) return;
            
            function updateWorldTime() {
                const timeZones = [
                    { city: '–ú–æ—Å–∫–≤–∞', offset: 3 },
                    { city: '–õ–æ–Ω–¥–æ–Ω', offset: 0 },
                    { city: '–ù—å—é-–ô–æ—Ä–∫', offset: -5 },
                    { city: '–¢–æ–∫–∏–æ', offset: 9 }
                ];
                
                const now = new Date();
                const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
                
                let html = '';
                timeZones.forEach(zone => {
                    const localTime = new Date(utc + (3600000 * zone.offset));
                    const timeString = localTime.toLocaleTimeString('ru-RU', { 
                        hour: '2-digit', 
                        minute: '2-digit',
                        hour12: false 
                    });
                    
                    html += `
                        <div class="time-zone">
                            <div class="time-city">${zone.city}</div>
                            <div class="time-display">${timeString}</div>
                            <div style="color: var(--text-dim); font-size: 0.9rem;">
                                GMT${zone.offset >= 0 ? '+' : ''}${zone.offset}
                            </div>
                        </div>
                    `;
                });
                
                content.innerHTML = html;
            }
            
            updateWorldTime();
            setInterval(updateWorldTime, 60000);
            
            document.querySelector('#worldTimeWidget .refresh-time-btn')?.addEventListener('click', updateWorldTime);
        }

        function initRecommendationsWidget() {
            const recContent = document.getElementById('recContent');
            if (!recContent) return;
            
            function renderRecommendations() {
                recContent.innerHTML = '';
                appData.recommendations.forEach(rec => {
                    const recCard = document.createElement('div');
                    recCard.style.cssText = 'background: rgba(255, 107, 53, 0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px; border: 1px solid var(--theme-border); cursor: pointer;';
                    recCard.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                            <div style="font-size: 1.5rem; color: var(--primary);">
                                <i class="${rec.icon}"></i>
                            </div>
                            <h4 style="color: var(--text-primary); margin: 0;">${rec.title}</h4>
                        </div>
                        <p style="color: var(--text-secondary); margin: 0;">${rec.description}</p>
                    `;
                    
                    recCard.addEventListener('click', function() {
                        alert(`${rec.title}\n\n${rec.description}`);
                    });
                    
                    recContent.appendChild(recCard);
                });
            }
            
            document.querySelector('#recWidget .refresh-btn')?.addEventListener('click', renderRecommendations);
            renderRecommendations();
        }

        function initWidgetManager() {
            const managerBtn = document.getElementById('addWidgetBtn');
            const manager = document.getElementById('widgetManager');
            const closeBtn = document.getElementById('closeManagerBtn');
            const availableWidgets = document.getElementById('availableWidgets');
            
            if (!managerBtn || !manager || !closeBtn || !availableWidgets) return;
            
            managerBtn.addEventListener('click', () => {
                manager.classList.add('active');
                document.body.style.overflow = 'hidden';
                renderAvailableWidgets();
            });
            
            closeBtn.addEventListener('click', () => {
                manager.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            function renderAvailableWidgets() {
                availableWidgets.innerHTML = '';
                appData.availableWidgets.forEach(widget => {
                    const isActive = appData.activeWidgets.includes(widget.id);
                    const widgetEl = document.createElement('div');
                    widgetEl.className = 'widget-preview';
                    widgetEl.innerHTML = `
                        <div style="font-size: 2rem; color: ${isActive ? 'var(--primary)' : 'var(--text-dim)'}; margin-bottom: 10px;">
                            <i class="${widget.icon}"></i>
                        </div>
                        <h4 style="color: ${isActive ? 'var(--text-primary)' : 'var(--text-dim)'}; margin-bottom: 5px;">
                            ${widget.name}
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px;">
                            ${widget.description}
                        </p>
                        <div style="color: ${isActive ? 'var(--primary)' : 'var(--text-dim)'};">
                            ${isActive ? '‚úì –ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'}
                        </div>
                    `;
                    
                    widgetEl.addEventListener('click', () => {
                        const index = appData.activeWidgets.indexOf(widget.id);
                        if (index > -1) {
                            appData.activeWidgets.splice(index, 1);
                            const widgetElement = document.getElementById(widget.id + 'Widget');
                            if (widgetElement) widgetElement.style.display = 'none';
                        } else {
                            appData.activeWidgets.push(widget.id);
                            const widgetElement = document.getElementById(widget.id + 'Widget');
                            if (widgetElement) widgetElement.style.display = 'block';
                        }
                        renderAvailableWidgets();
                    });
                    
                    availableWidgets.appendChild(widgetEl);
                });
            }
        }

        // ========== –§–£–ù–ö–¶–ò–ò –ü–°–ò–•–û–õ–û–ì–ò–ß–ï–°–ö–û–ì–û –í–ò–î–ñ–ï–¢–ê ==========
        function initPsychologicalWidget() {
            const widget = document.getElementById('psychologicalWidget');
            const startBtn = document.getElementById('startPsychologicalBtn');
            
            if (!widget || !startBtn) return;
            
            document.querySelector('#psychologicalWidget .close-btn')?.addEventListener('click', function() {
                widget.style.display = 'none';
                const index = appData.activeWidgets.indexOf('psychological');
                if (index > -1) appData.activeWidgets.splice(index, 1);
            });
            
            startBtn.addEventListener('click', startPsychSession);
            
            document.getElementById('psychPrevBtn')?.addEventListener('click', psychPrevStep);
            document.getElementById('psychNextBtn')?.addEventListener('click', psychNextStep);
            document.getElementById('psychSubmitBtn')?.addEventListener('click', psychCompleteSession);
            
            document.getElementById('closePsychResultsBtn')?.addEventListener('click', () => {
                document.getElementById('psychResultsScreen').classList.remove('active');
                document.body.style.overflow = 'auto';
                updatePsychWidgetDisplay();
            });
            
            document.getElementById('redoPsychQuizBtn')?.addEventListener('click', () => {
                document.getElementById('psychResultsScreen').classList.remove('active');
                startPsychSession();
            });
        }

        function startPsychSession() {
            gloxSessionState.startedAt = Date.now();
            gloxSessionState.finishedAt = null;
            gloxSessionState.baseCoordinates = { x: 0, y: 0 };
            
            gloxSessionState.surveys.forEach(survey => {
                survey.startedAt = null;
                survey.finishedAt = null;
                survey.questions.forEach(q => {
                    q.answersHistory = [];
                    q.finalValue = null;
                    q.changesCount = 0;
                });
            });
            
            psychCurrentStep = 'base';
            document.getElementById('psychQuizScreen').classList.add('active');
            document.body.style.overflow = 'hidden';
            renderPsychBaseStep();
        }

        function renderPsychBaseStep() {
            const content = document.getElementById('psychQuizContent');
            if (!content) return;
            
            document.getElementById('psychQuizSubtitle').textContent = '–ë–∞–∑–æ–≤–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞';
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <p style="color: var(--text-secondary); margin-bottom: 20px;">
                        –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∞–∑–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
                    </p>
                </div>
                
                <div style="margin-bottom: 30px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ (X)</span>
                        <span style="color: var(--primary);" id="baseXValue">0.0</span>
                    </div>
                    <input type="range" id="baseXSlider" min="-10" max="10" step="0.5" value="0" 
                           style="width: 100%; margin-bottom: 20px;">
                    
                    <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                        <span>–ù–∞–≥—Ä—É–∑–∫–∞/–ü–ª–∞–Ω—ã (Y)</span>
                        <span style="color: var(--primary);" id="baseYValue">0.0</span>
                    </div>
                    <input type="range" id="baseYSlider" min="-10" max="10" step="0.5" value="0" 
                           style="width: 100%;">
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 30px;" class="psych-preview-grid">
                    <div style="text-align: center; padding: 15px; background: rgba(255,107,53,0.05); border-radius: 8px;">
                        <div style="font-size: 2rem;">üòê</div>
                        <div style="color: var(--text-dim);">–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,107,53,0.05); border-radius: 8px;">
                        <div style="font-size: 2rem;">‚öñÔ∏è</div>
                        <div style="color: var(--text-dim);">–ë–∞–ª–∞–Ω—Å: 0.0</div>
                    </div>
                </div>
            `;
            
            const xSlider = document.getElementById('baseXSlider');
            const ySlider = document.getElementById('baseYSlider');
            const xValue = document.getElementById('baseXValue');
            const yValue = document.getElementById('baseYValue');
            
            if (xSlider && ySlider && xValue && yValue) {
                xSlider.addEventListener('input', () => {
                    const val = parseFloat(xSlider.value);
                    xValue.textContent = val.toFixed(1);
                    gloxSessionState.baseCoordinates.x = val;
                    updateBasePreview();
                });
                
                ySlider.addEventListener('input', () => {
                    const val = parseFloat(ySlider.value);
                    yValue.textContent = val.toFixed(1);
                    gloxSessionState.baseCoordinates.y = val;
                    updateBasePreview();
                });
            }
            
            document.getElementById('psychPrevBtn').disabled = true;
            document.getElementById('psychNextBtn').style.display = 'block';
            document.getElementById('psychSubmitBtn').style.display = 'none';
        }

        function updateBasePreview() {
            const x = gloxSessionState.baseCoordinates.x;
            const y = gloxSessionState.baseCoordinates.y;
            const balance = Math.abs(x - y).toFixed(1);
            
            let moodEmoji = 'üòê';
            const avg = (x + y) / 2;
            if (avg >= 5) moodEmoji = 'üòä';
            else if (avg >= 2) moodEmoji = 'üôÇ';
            else if (avg >= -2) moodEmoji = 'üòê';
            else if (avg >= -5) moodEmoji = 'üòû';
            else moodEmoji = 'üò∞';
            
            const previewGrid = document.querySelector('.psych-preview-grid');
            if (previewGrid) {
                previewGrid.innerHTML = `
                    <div style="text-align: center; padding: 15px; background: rgba(255,107,53,0.05); border-radius: 8px;">
                        <div style="font-size: 2rem;">${moodEmoji}</div>
                        <div style="color: var(--text-dim);">–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</div>
                    </div>
                    <div style="text-align: center; padding: 15px; background: rgba(255,107,53,0.05); border-radius: 8px;">
                        <div style="font-size: 2rem;">‚öñÔ∏è</div>
                        <div style="color: var(--text-dim);">–ë–∞–ª–∞–Ω—Å: ${balance}</div>
                    </div>
                `;
            }
        }

        function psychNextStep() {
            if (psychCurrentStep === 'base') {
                psychCurrentStep = 'surveys';
                psychCurrentSurveyIndex = 0;
                psychCurrentQuestionIndex = 0;
                if (gloxSessionState.surveys[0]) gloxSessionState.surveys[0].startedAt = Date.now();
                renderPsychQuestion();
            } else if (psychCurrentStep === 'surveys') {
                const currentSurvey = gloxSessionState.surveys[psychCurrentSurveyIndex];
                if (!currentSurvey) return;
                
                if (psychCurrentQuestionIndex < currentSurvey.questions.length - 1) {
                    psychCurrentQuestionIndex++;
                    renderPsychQuestion();
                } else {
                    currentSurvey.finishedAt = Date.now();
                    
                    if (psychCurrentSurveyIndex < gloxSessionState.surveys.length - 1) {
                        psychCurrentSurveyIndex++;
                        psychCurrentQuestionIndex = 0;
                        if (gloxSessionState.surveys[psychCurrentSurveyIndex]) {
                            gloxSessionState.surveys[psychCurrentSurveyIndex].startedAt = Date.now();
                        }
                        renderPsychQuestion();
                    } else {
                        psychCompleteSession();
                    }
                }
            }
        }

        function psychPrevStep() {
            if (psychCurrentStep === 'surveys') {
                if (psychCurrentQuestionIndex > 0) {
                    psychCurrentQuestionIndex--;
                    renderPsychQuestion();
                } else if (psychCurrentSurveyIndex > 0) {
                    psychCurrentSurveyIndex--;
                    const prevSurvey = gloxSessionState.surveys[psychCurrentSurveyIndex];
                    if (prevSurvey) {
                        psychCurrentQuestionIndex = prevSurvey.questions.length - 1;
                        renderPsychQuestion();
                    }
                } else {
                    psychCurrentStep = 'base';
                    renderPsychBaseStep();
                }
            }
        }

        function renderPsychQuestion() {
            const survey = gloxSessionState.surveys[psychCurrentSurveyIndex];
            const question = survey?.questions[psychCurrentQuestionIndex];
            if (!survey || !question) return;
            
            const config = questionsConfig[question.questionId];
            if (!config) return;
            
            document.getElementById('psychQuizSubtitle').textContent = survey.topic;
            
            const totalQuestions = gloxSessionState.surveys.reduce((acc, s) => acc + s.questions.length, 0);
            const currentQuestionNum = gloxSessionState.surveys
                .slice(0, psychCurrentSurveyIndex)
                .reduce((acc, s) => acc + s.questions.length, 0) + psychCurrentQuestionIndex + 1;
            const progress = (currentQuestionNum / totalQuestions) * 100;
            document.getElementById('psychQuizProgress').style.width = progress + '%';
            
            const content = document.getElementById('psychQuizContent');
            if (!content) return;
            
            let optionsHtml = '';
            
            config.options.forEach(option => {
                const isSelected = question.finalValue === option.value;
                optionsHtml += `
                    <div class="quiz-option psych-option" data-value="${option.value}" 
                         data-impact='${JSON.stringify(option.impact)}'
                         style="${isSelected ? 'background: rgba(255,107,53,0.3); border-color: var(--primary);' : ''}">
                        ${option.label}
                    </div>
                `;
            });
            
            content.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <h3 style="color: var(--text-primary); margin-bottom: 10px;">${question.questionText}</h3>
                    <p style="color: var(--text-dim); font-size: 0.9rem;">
                        –ò–∑–º–µ–Ω–µ–Ω–∏–π: ${question.changesCount}
                    </p>
                </div>
                
                <div class="quiz-options" style="margin-bottom: 20px;">
                    ${optionsHtml}
                </div>
            `;
            
            document.querySelectorAll('.psych-option').forEach(opt => {
                opt.addEventListener('click', function() {
                    const value = parseInt(this.dataset.value);
                    const impact = JSON.parse(this.dataset.impact);
                    
                    document.querySelectorAll('.psych-option').forEach(o => {
                        o.style.background = 'rgba(255, 107, 53, 0.1)';
                        o.style.borderColor = 'rgba(255, 107, 53, 0.2)';
                    });
                    
                    this.style.background = 'rgba(255, 107, 53, 0.3)';
                    this.style.borderColor = 'var(--primary)';
                    
                    question.answersHistory.push({
                        value: value,
                        impact: impact,
                        timestamp: Date.now()
                    });
                    
                    question.changesCount++;
                    question.finalValue = value;
                    
                    const counter = document.querySelector('#psychQuizContent p');
                    if (counter) {
                        counter.innerHTML = `–ò–∑–º–µ–Ω–µ–Ω–∏–π: ${question.changesCount}`;
                    }
                });
            });
            
            document.getElementById('psychPrevBtn').disabled = false;
        }

        function psychCompleteSession() {
            let totalChanges = 0;
            let totalQuestions = 0;
            
            gloxSessionState.surveys.forEach(survey => {
                survey.questions.forEach(q => {
                    totalChanges += q.changesCount;
                    totalQuestions++;
                });
            });
            
            gloxSessionState.metrics.instability = Math.min(100, (totalChanges / totalQuestions) * 20);
            gloxSessionState.metrics.clarificationDepth = totalChanges;
            
            const timeSpent = (Date.now() - gloxSessionState.startedAt) / 1000;
            const timePenalty = timeSpent < 30 ? 10 : 0;
            
            let confidence = 100 - (gloxSessionState.metrics.instability * 0.6) - timePenalty;
            gloxSessionState.metrics.confidence = Math.min(95, Math.max(40, Math.round(confidence)));
            
            let xDelta = 0, yDelta = 0;
            gloxSessionState.surveys.forEach(survey => {
                survey.questions.forEach(q => {
                    if (q.finalValue !== null && q.answersHistory.length > 0) {
                        const lastAnswer = q.answersHistory[q.answersHistory.length - 1];
                        xDelta += lastAnswer.impact.xDelta;
                        yDelta += lastAnswer.impact.yDelta;
                    }
                });
            });
            
            let finalX = gloxSessionState.baseCoordinates.x + xDelta;
            let finalY = gloxSessionState.baseCoordinates.y + yDelta;
            
            gloxSessionState.baseCoordinates.x = Math.min(10, Math.max(-10, finalX));
            gloxSessionState.baseCoordinates.y = Math.min(10, Math.max(-10, finalY));
            gloxSessionState.finishedAt = Date.now();
            
            document.getElementById('psychQuizScreen').classList.remove('active');
            document.getElementById('psychResultsScreen').classList.add('active');
            
            const x = gloxSessionState.baseCoordinates.x.toFixed(1);
            const y = gloxSessionState.baseCoordinates.y.toFixed(1);
            const tension = Math.abs(gloxSessionState.baseCoordinates.y - gloxSessionState.baseCoordinates.x).toFixed(1);
            
            document.getElementById('finalX').textContent = x;
            document.getElementById('finalY').textContent = y;
            document.getElementById('tensionIndex').textContent = tension;
            document.getElementById('confidenceValue').textContent = gloxSessionState.metrics.confidence + '%';
            document.getElementById('instabilityValue').textContent = Math.round(gloxSessionState.metrics.instability) + '%';
            document.getElementById('clarificationDepth').textContent = gloxSessionState.metrics.clarificationDepth;
            
            let statusHtml = '';
            if (gloxSessionState.metrics.instability > 60) {
                statusHtml += '<div style="background: rgba(244, 67, 54, 0.1); padding: 10px; border-radius: 5px; margin: 5px 0; color: #F44336;"><i class="fas fa-exclamation-triangle"></i> –°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ</div>';
            }
            if (gloxSessionState.metrics.confidence > 80) {
                statusHtml += '<div style="background: rgba(76, 175, 80, 0.1); padding: 10px; border-radius: 5px; margin: 5px 0; color: #4CAF50;"><i class="fas fa-check-circle"></i> –ó–∞–º–µ—Ä —É—Å—Ç–æ–π—á–∏–≤</div>';
            }
            if (tension > 5) {
                statusHtml += '<div style="background: rgba(255, 152, 0, 0.1); padding: 10px; border-radius: 5px; margin: 5px 0; color: #FF9800;"><i class="fas fa-balance-scale"></i> –í–æ–∑–º–æ–∂–µ–Ω –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç</div>';
            }
            document.getElementById('statusMessages').innerHTML = statusHtml;
        }

        function updatePsychWidgetDisplay() {
            const content = document.getElementById('psychologicalContent');
            if (!content) return;
            
            if (gloxSessionState.finishedAt) {
                const x = gloxSessionState.baseCoordinates.x.toFixed(1);
                const y = gloxSessionState.baseCoordinates.y.toFixed(1);
                const confidence = gloxSessionState.metrics.confidence;
                
                content.innerHTML = `
                    <div style="text-align: center;">
                        <div style="display: flex; justify-content: space-around; margin-bottom: 20px;">
                            <div>
                                <div style="color: var(--primary); font-size: 1.5rem;">X: ${x}</div>
                                <div style="color: var(--primary); font-size: 1.5rem;">Y: ${y}</div>
                            </div>
                            <div>
                                <div style="color: #4CAF50; font-size: 1.2rem;">${confidence}%</div>
                                <div style="color: var(--text-dim);">—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å</div>
                            </div>
                        </div>
                        <button class="quiz-btn" id="startPsychologicalBtn" style="width: 100%;">
                            <i class="fas fa-redo"></i> –ü–†–û–ô–¢–ò –ó–ê–ù–û–í–û
                        </button>
                    </div>
                `;
                document.getElementById('startPsychologicalBtn')?.addEventListener('click', startPsychSession);
            }
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ==========
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            
            // –û—Å–Ω–æ–≤–Ω–æ–π –æ–ø—Ä–æ—Å–Ω–∏–∫
            const mainCircle = document.getElementById('mainCircle');
            if (mainCircle) {
                mainCircle.addEventListener('click', () => {
                    mainCircle.classList.add('hidden');
                    document.getElementById('quizScreen').classList.add('active');
                    document.body.style.overflow = 'hidden';
                    renderCurrentCategory();
                });
            }
            
            document.getElementById('resultCircle')?.addEventListener('click', resetQuiz);
            
            document.getElementById('prevBtn')?.addEventListener('click', () => {
                if (currentCategoryIndex > 0) {
                    currentCategoryIndex--;
                    renderCurrentCategory();
                }
            });
            
            document.getElementById('nextBtn')?.addEventListener('click', () => {
                if (currentCategoryIndex < wellBeingQuiz.categories.length - 1) {
                    currentCategoryIndex++;
                    renderCurrentCategory();
                }
            });
            
            document.getElementById('submitBtn')?.addEventListener('click', showResults);
            
            document.getElementById('closeResultsBtn')?.addEventListener('click', () => {
                document.getElementById('resultsScreen').classList.remove('active');
                document.body.style.overflow = 'auto';
                showResultCircle();
            });
            
            document.getElementById('redoQuizBtn')?.addEventListener('click', resetQuiz);
            
            // –í–∏–¥–∂–µ—Ç—ã
            initTasksWidget();
            initWorldTimeWidget();
            initRecommendationsWidget();
            initPsychologicalWidget();
            initWidgetManager();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é —Å–µ—Å—Å–∏—é
            const saved = sessionStorage.getItem('gloxPsychSession');
            if (saved) {
                try {
                    Object.assign(gloxSessionState, JSON.parse(saved));
                    updatePsychWidgetDisplay();
                } catch (e) {
                    console.log('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Å—Å–∏–∏');
                }
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏
            window.addEventListener('beforeunload', () => {
                sessionStorage.setItem('gloxPsychSession', JSON.stringify(gloxSessionState));
            });
        });
    </script>

</body>
</html>
