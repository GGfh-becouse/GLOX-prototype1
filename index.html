<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLOX</title>
    <link rel="icon" type="image/png" href="logomini.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:wght@700&family=Oswald:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #FF6B35;
            --primary-dark: #D45A2C;
            --primary-light: #FF8C5A;
            --primary-glow: rgba(255, 107, 53, 0.3);
            --bg-gradient: linear-gradient(135deg, #121212 0%, #1A1A1A 100%);
            --card-bg: rgba(40, 40, 40, 0.9);
            --border-color: #333333;
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --text-dim: #888888;
            --font-logo: 'Zalando Sans Expanded', sans-serif;
            --font-main: 'Oswald', sans-serif;
            --theme-bg: #121212;
            --theme-card: #1A1A1A;
            --theme-text: #FFFFFF;
            --theme-border: #333333;
        }
        
        .light-theme {
            --theme-bg: #F8F8F8;
            --theme-card: #FFFFFF;
            --theme-text: #333333;
            --theme-border: #DDDDDD;
            --text-primary: #222222;
            --text-secondary: #555555;
            --text-dim: #777777;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: var(--font-main);
            font-weight: 400;
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        body {
            background: var(--theme-bg);
            color: var(--theme-text);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }
        
        .hidden {
            display: none !important;
        }
        
        /* –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π */
        .theme-controls {
            position: fixed;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }
        
        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 2px solid var(--theme-border);
            background: var(--card-bg);
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }
        
        .theme-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .theme-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        /* –õ–æ–≥–æ—Ç–∏–ø –∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ */
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            padding: 10px 0;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
            font-weight: bold;
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .logo-text {
            font-family: var(--font-logo);
            font-weight: 700;
            font-size: 3rem;
            color: var(--primary);
            letter-spacing: 1px;
            text-transform: uppercase;
        }
        
        /* –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞ */
        .philosophy-quote {
            text-align: center;
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-style: italic;
            margin-bottom: 30px;
            padding: 15px;
            border-top: 1px solid var(--theme-border);
            border-bottom: 1px solid var(--theme-border);
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            font-weight: 300;
        }
        
        /* –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω */
        .main-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin: 20px auto;
            position: relative;
            max-width: 1200px;
            min-height: 400px;
        }
        
        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥ */
        .glowing-circle {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: var(--card-bg);
            border: 4px solid var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 0 50px var(--primary-glow), 0 0 100px rgba(255, 107, 53, 0.2);
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            margin: 30px 0;
        }
        
        .glowing-circle::before {
            content: '';
            position: absolute;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
            animation: pulse 2s infinite alternate ease-in-out;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; transform: scale(0.9); }
            100% { opacity: 0.8; transform: scale(1.2); }
        }
        
        .glowing-circle:hover {
            transform: scale(1.15);
            box-shadow: 0 0 80px var(--primary-glow), 0 0 150px rgba(255, 107, 53, 0.3), inset 0 0 20px rgba(255, 107, 53, 0.1);
            border-width: 5px;
        }
        
        .circle-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: 40px;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }
        
        .circle-content h2 {
            color: var(--text-primary);
            font-size: 2rem;
            margin-bottom: 5px;
            font-family: var(--font-logo);
            font-weight: 700;
            line-height: 1.2;
        }
        
        .circle-content p {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin: 3px 0;
            max-width: 90%;
            line-height: 1.4;
        }
        
        .status-indicator {
            width: 20px;
            height: 20px;
            background-color: var(--primary);
            border-radius: 50%;
            margin: 0 auto 20px;
            box-shadow: 0 0 15px var(--primary);
            animation: statusPulse 1.5s infinite;
        }
        
        @keyframes statusPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 15px var(--primary); }
            50% { transform: scale(1.2); box-shadow: 0 0 25px var(--primary); }
        }
        
        /* –û–ø—Ä–æ—Å–Ω–∏–∫ */
        .fullscreen-quiz {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--theme-bg);
            z-index: 1000;
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease;
            padding: 40px 20px;
            overflow-y: auto;
        }
        
        .fullscreen-quiz.active {
            display: block;
            opacity: 1;
        }
        
        .quiz-container {
            max-width: 600px;
            margin: 0 auto;
            padding: 40px;
            background: var(--card-bg);
            border-radius: 20px;
            border: 1px solid var(--theme-border);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        }
        
        .quiz-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .quiz-title {
            font-family: var(--font-logo);
            font-size: 2.2rem;
            color: var(--primary);
            margin-bottom: 10px;
        }
        
        .quiz-subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }
        
        .quiz-question {
            font-size: 1.3rem;
            margin-bottom: 30px;
            color: var(--text-primary);
            line-height: 1.5;
            text-align: center;
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 40px;
        }
        
        .quiz-option {
            background: rgba(255, 107, 53, 0.1);
            border: 2px solid rgba(255, 107, 53, 0.2);
            border-radius: 12px;
            padding: 18px 25px;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            text-align: center;
        }
        
        .quiz-option:hover {
            background: rgba(255, 107, 53, 0.2);
            border-color: var(--primary);
            transform: translateY(-2px);
        }
        
        .quiz-option.selected {
            background: rgba(255, 107, 53, 0.3);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(255, 107, 53, 0.3);
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            margin-top: 30px;
        }
        
        .quiz-btn {
            padding: 12px 30px;
            background: var(--primary);
            border: none;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            font-size: 1rem;
            min-width: 120px;
        }
        
        .quiz-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .quiz-btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            transform: none;
        }
        
        .quiz-progress {
            color: var(--text-secondary);
            font-size: 0.9rem;
            text-align: center;
            margin-top: 20px;
        }
        
        /* –†–µ–∑—É–ª—å—Ç–∞—Ç—ã */
        .results-screen {
            text-align: center;
            padding: 30px;
        }
        
        .mood-emoji {
            font-size: 4rem;
            margin: 20px 0;
        }
        
        .mood-score {
            color: var(--primary);
            font-size: 3rem;
            font-family: var(--font-logo);
            margin: 15px 0;
        }
        
        .mood-title {
            font-size: 1.8rem;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        
        .recommendations {
            background: rgba(255, 107, 53, 0.1);
            border-radius: 15px;
            padding: 25px;
            margin: 30px 0;
            border-left: 4px solid var(--primary);
        }
        
        .recommendations h4 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .recommendations ul {
            list-style: none;
            text-align: left;
        }
        
        .recommendations li {
            padding: 10px 0;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .recommendations li i {
            color: var(--primary);
        }
        
        /* –í–∏–¥–∂–µ—Ç—ã */
        .widgets-area {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 40px;
            padding: 25px;
            border-radius: 15px;
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .widget {
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }
        
        .widget:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .widget-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--theme-border);
        }
        
        .widget-title {
            color: var(--primary);
            font-size: 1.4rem;
            display: flex;
            align-items: center;
            gap: 12px;
            font-family: var(--font-logo);
            font-weight: 700;
        }
        
        .widget-controls {
            display: flex;
            gap: 5px;
        }
        
        .widget-btn {
            width: 30px;
            height: 30px;
            border-radius: 6px;
            background: transparent;
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #888;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
        }
        
        .widget-btn:hover {
            border-color: rgba(255, 107, 53, 0.5);
            color: #ff6b35;
        }
        
        /* –í—Ä–µ–º—è */
        .world-time {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 15px;
        }
        
        .time-zone {
            padding: 15px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 10px;
            border: 1px solid var(--theme-border);
        }
        
        .time-city {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .time-display {
            font-size: 1.5rem;
            color: var(--primary);
            font-family: 'Courier New', monospace;
        }
        
        /* –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞–º–∏ */
        .add-widget-btn {
            display: block;
            margin: 30px auto;
            padding: 15px 35px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
        }
        
        .add-widget-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(255, 107, 53, 0.3);
        }
        
        /* –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤ */
        .widget-manager {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: var(--card-bg);
            border: 1px solid var(--theme-border);
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 2000;
            display: none;
            opacity: 0;
            transition: all 0.3s ease;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .widget-manager.active {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .manager-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--theme-border);
        }
        
        .available-widgets {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .widget-preview {
            padding: 20px;
            background: rgba(255, 107, 53, 0.05);
            border: 2px dashed var(--theme-border);
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .widget-preview:hover {
            background: rgba(255, 107, 53, 0.1);
            border-color: var(--primary);
            transform: translateY(-3px);
        }
        
        /* –ò—Å—Ç–æ—Ä–∏—è –∏ —Ñ—É—Ç–µ—Ä */
        .glox-history {
            max-width: 800px;
            margin: 50px auto;
            padding: 40px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--theme-border);
        }
        
        .history-title {
            color: var(--primary);
            font-family: var(--font-logo);
            font-size: 2rem;
            margin-bottom: 25px;
            text-align: center;
        }
        
        .history-content {
            color: var(--text-secondary);
            line-height: 1.8;
            font-size: 1.1rem;
        }
        
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 30px 0;
            border-top: 1px solid var(--theme-border);
            color: var(--text-dim);
            font-size: 0.9rem;
        }
        
        @media (max-width: 768px) {
            .widgets-area { grid-template-columns: 1fr; padding: 15px; }
            .world-time { grid-template-columns: 1fr; }
            .quiz-container { padding: 20px; }
            .quiz-navigation { flex-direction: column; }
            .quiz-btn { width: 100%; }
            .logo-container { flex-direction: column; gap: 10px; }
            .logo-text { font-size: 2.2rem; }
            .glox-history { padding: 20px; }
        }
    </style>
</head>
<body>
    <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–º–æ–π -->
    <div class="theme-controls">
        <button class="theme-btn active" id="darkThemeBtn">
            <i class="fas fa-moon"></i>
        </button>
        <button class="theme-btn" id="lightThemeBtn">
            <i class="fas fa-sun"></i>
        </button>
    </div>
    
    <!-- –õ–æ–≥–æ—Ç–∏–ø -->
    <div class="logo-container">
        <img src="logo.png" class="logo-icon" alt="GLOX">
        <h1 class="logo-text">GLOX</h1>
    </div>
    
    <!-- –§–∏–ª–æ—Å–æ—Ñ—Å–∫–∞—è —Ñ—Ä–∞–∑–∞ -->
    <div class="philosophy-quote">
        "–í—Å–µ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç"
    </div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <main class="main-screen">
        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫—Ä—É–≥ -->
        <div class="glowing-circle" id="mainCircle">
            <div class="circle-content">
                <div class="status-indicator"></div>
                <h2>–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
            </div>
        </div>
        
        <!-- –ö—Ä—É–≥ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
        <div class="glowing-circle hidden" id="resultCircle">
            <div class="circle-content">
                <div id="resultEmoji" class="mood-emoji"></div>
                <h2 id="resultTitle"></h2>
                <p id="resultScore" class="mood-score"></p>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞</p>
            </div>
        </div>
    </main>
    
    <!-- –û–ø—Ä–æ—Å–Ω–∏–∫ -->
    <div class="fullscreen-quiz" id="fullscreenQuiz">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2 class="quiz-title">–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p class="quiz-subtitle">–û—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π</p>
            </div>
            
            <div id="quizContent">
                <div class="quiz-question" id="questionText"></div>
                
                <div class="quiz-options" id="optionsContainer"></div>
                
                <div class="quiz-navigation">
                    <button class="quiz-btn" id="prevBtn" disabled>
                        <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                    </button>
                    <div class="quiz-progress" id="progressText"></div>
                    <button class="quiz-btn" id="nextBtn">
                        –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
            
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="results-screen hidden" id="resultsScreen">
                <h2 class="mood-title">–í–ê–® –†–ï–ó–£–õ–¨–¢–ê–¢</h2>
                <div id="moodEmoji" class="mood-emoji"></div>
                <div id="finalScore" class="mood-score"></div>
                
                <div class="recommendations">
                    <h4>–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ù–ê –î–ï–ù–¨</h4>
                    <ul id="recommendationsList"></ul>
                </div>
                
                <button class="quiz-btn" id="closeQuizBtn">
                    <i class="fas fa-check"></i> –ó–ê–í–ï–†–®–ò–¢–¨
                </button>
            </div>
        </div>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–∏–¥–∂–µ—Ç–∞–º–∏ -->
    <button class="add-widget-btn" id="addWidgetBtn">
        <i class="fas fa-layer-group"></i> –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ñ–ï–¢–ê–ú–ò
    </button>
    
    <!-- –í–∏–¥–∂–µ—Ç—ã -->
    <div class="widgets-area" id="widgetsArea">
        <!-- –ó–∞–¥–∞—á–∏ -->
        <div class="widget" id="tasksWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-tasks"></i> –ó–ê–î–ê–ß–ò</h3>
                <div class="widget-controls">
                    <button class="widget-btn add-task-btn"><i class="fas fa-plus"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="widget-content" id="tasksContent"></div>
        </div>
        
        <!-- –ú–∏—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è -->
        <div class="widget" id="worldTimeWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-globe"></i> –ú–ò–†–û–í–û–ï –í–†–ï–ú–Ø</h3>
                <div class="widget-controls">
                    <button class="widget-btn refresh-time-btn"><i class="fas fa-sync-alt"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="world-time" id="worldTimeContent"></div>
        </div>
        
        <!-- –°–æ–≤–µ—Ç—ã -->
        <div class="widget" id="recWidget">
            <div class="widget-header">
                <h3 class="widget-title"><i class="fas fa-lightbulb"></i> –°–û–í–ï–¢–´ GLOX</h3>
                <div class="widget-controls">
                    <button class="widget-btn refresh-btn"><i class="fas fa-sync-alt"></i></button>
                    <button class="widget-btn close-btn"><i class="fas fa-times"></i></button>
                </div>
            </div>
            <div class="widget-content" id="recContent"></div>
        </div>
    </div>
    
    <!-- –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤ -->
    <div class="widget-manager" id="widgetManager">
        <div class="manager-header">
            <h2 style="color: var(--primary); font-family: var(--font-logo);">
                <i class="fas fa-layer-group"></i> –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ñ–ï–¢–ê–ú–ò
            </h2>
            <button class="quiz-btn" id="closeManagerBtn" style="padding: 8px 20px;">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <p style="color: var(--text-secondary); margin-bottom: 20px;">
            –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–∂–µ—Ç—ã –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ:
        </p>
        
        <div class="available-widgets" id="availableWidgets"></div>
    </div>
    
    <!-- –ò—Å—Ç–æ—Ä–∏—è -->
    <div class="glox-history">
        <h2 class="history-title">–ü–£–¢–¨ GLOX</h2>
        <div class="history-content">
            <p>–ü—Ä–æ–µ–∫—Ç GLOX –≤—ã—Ä–æ—Å –∏–∑ ¬´–ó–∞–∫–æ–Ω–∞ –í–æ–ª—Ç–µ—Ä–∞¬ª ‚Äî –∏–¥–µ–∏ –æ —Ç–æ–º, —á—Ç–æ –º–∏—Ä –∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –∏—Å—Ö–æ–¥–∞–º–∏ –∏ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∫—Ä—ã—Ç—ã–µ –≤–µ—Ç–≤–∏ —Ä–∞–∑–≤–∏—Ç–∏—è. –¶–∏—Ç–∞—Ç—É, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é –∑–∞–∫–æ–Ω –≤—ã –≤–∏–¥–∏—Ç–µ –≤—ã—à–µ.</p>
            <p>–û—Ç —Ñ–∏–ª–æ—Å–æ—Ñ—Å–∫–æ–π –º–æ–¥–µ–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –∏ –±–∞–ª–∞–Ω—Å–∞ —Ä–µ–¥–∫–∏—Ö –∏—Å—Ö–æ–¥–æ–≤ –∫–æ–Ω—Ü–µ–ø—Ü–∏—è –ø–µ—Ä–µ—à–ª–∞ –≤ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫—É—é —Ñ–æ—Ä–º—É: —Å–Ω–∞—á–∞–ª–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω–æ–µ –ü–û –∏ –ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∑–∞—Ç–µ–º –∫–∞–∫ —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
            <p>–°–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º —Å—Ç–∞–ª Telegram-–±–æ—Ç ‚Äî –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è, –¥–æ—Å—Ç—É–ø–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–¥–µ–π, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º. GLOX –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —ç–≤–æ–ª—é—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç –æ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∑–∞–∫–æ–Ω–∞ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –æ–±—ä–µ–¥–∏–Ω—è—é—â–µ–π –º—ã—à–ª–µ–Ω–∏–µ, –∞–Ω–∞–ª–∏—Ç–∏–∫—É –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.</p>
        </div>
    </div>
    
    <!-- –§—É—Ç–µ—Ä -->
    <div class="footer">
        GLOX ¬© 2026. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
    </div>
    
    <script>
        // –î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const appData = {
            activeWidgets: ['tasks', 'worldTime', 'recommendations'],
            availableWidgets: [
                { id: 'tasks', name: '–ó–∞–¥–∞—á–∏', icon: 'fas fa-tasks', description: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏' },
                { id: 'worldTime', name: '–ú–∏—Ä–æ–≤–æ–µ –≤—Ä–µ–º—è', icon: 'fas fa-globe', description: '–í—Ä–µ–º—è –≤ —Ä–∞–∑–Ω—ã—Ö –≥–æ—Ä–æ–¥–∞—Ö' },
                { id: 'recommendations', name: '–°–æ–≤–µ—Ç—ã GLOX', icon: 'fas fa-lightbulb', description: '–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏' }
            ],
            tasks: [
                { id: 1, text: '–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è –≤ GLOX', completed: false },
                { id: 2, text: '–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–∏–¥–∂–µ—Ç—ã –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã', completed: false },
                { id: 3, text: '–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–≤–µ—Ç–ª—É—é —Ç–µ–º—É', completed: false }
            ],
            recommendations: [
                { title: '–ù–∞—á–Ω–∏—Ç–µ –¥–µ–Ω—å —Å —Ç–µ—Å—Ç–∞ —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è', description: '–ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏', icon: 'fas fa-heartbeat' },
                { title: '–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—ë–º–Ω—É—é —Ç–µ–º—É –≤–µ—á–µ—Ä–æ–º', description: '–î–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –≥–ª–∞–∑–∞', icon: 'fas fa-moon' },
                { title: '–§–∏–ª–æ—Å–æ—Ñ–∏—è GLOX', description: '–ü–æ–º–Ω–∏—Ç–µ: –≤—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç', icon: 'fas fa-brain' }
            ]
        };
        
        // –¢–µ—Å—Ç —Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏—è
        // –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ—Ü–µ–Ω–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∑–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—ã–π wellBeingQuiz)
const wellBeingQuiz = {
    categories: [
        { id: 'sleep', name: '–°–æ–Ω', x: 0, y: 0 },
        { id: 'mood', name: '–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ', x: 0, y: 0 },
        { id: 'physical', name: '–§–∏–∑–∏—á–µ—Å–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ', x: 0, y: 0 }
    ],
    recommendations: {
        12: {
            title: "–ò–î–ï–ê–õ–¨–ù–û!",
            emoji: "üåü",
            tips: [
                "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á",
                "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º —Å –¥—Ä—É–≥–∏–º–∏",
                "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –Ω–∞ –≤–µ—á–µ—Ä"
            ]
        },
        9: {
            title: "–•–û–†–û–®–û",
            emoji: "üòä",
            tips: [
                "–°–æ—Å—Ç–∞–≤—å—Ç–µ –ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å",
                "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å",
                "–°–¥–µ–ª–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ–≥—É–ª–∫—É"
            ]
        },
        6: {
            title: "–ù–û–†–ú–ê–õ–¨–ù–û",
            emoji: "üôÇ",
            tips: [
                "–ù–∞—á–Ω–∏—Ç–µ —Å –ª—ë–≥–∫–∏—Ö –∑–∞–¥–∞—á",
                "–°–¥–µ–ª–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤",
                "–ü–æ—Å–ª—É—à–∞–π—Ç–µ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É"
            ]
        },
        3: {
            title: "–¢–†–ï–í–û–ñ–ù–û",
            emoji: "üòî",
            tips: [
                "–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ 15-20 –º–∏–Ω—É—Ç",
                "–í—ã–ø–µ–π—Ç–µ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π",
                "–°–¥–µ–ª–∞–π—Ç–µ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è"
            ]
        }
    },
    calculateScore() {
        const sumX = this.categories.reduce((acc, cat) => acc + cat.x, 0);
        const sumY = this.categories.reduce((acc, cat) => acc + cat.y, 0);
        return (sumX + sumY) / 2;
    }
};

// –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –æ–Ω–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è)
let currentCategoryIndex = 0;
let userAnswers = [];

// –§—É–Ω–∫—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –æ–ø—Ä–æ—Å–Ω–∏–∫–∞
function createCategoryGrid(category, container) {
    const gridSize = 200;
    const half = gridSize / 2;

    const gridDiv = document.createElement('div');
    gridDiv.className = 'category-grid';
    gridDiv.style.cssText = `
        position: relative;
        width: ${gridSize}px;
        height: ${gridSize}px;
        background: var(--card-bg);
        border: 2px solid var(--primary);
        border-radius: 10px;
        margin: 0 auto 20px;
        cursor: crosshair;
        box-shadow: 0 0 20px rgba(255,107,53,0.2);
    `;

    const xAxis = document.createElement('div');
    xAxis.style.cssText = `
        position: absolute;
        top: 50%;
        left: 0;
        width: 100%;
        height: 2px;
        background: rgba(255,107,53,0.3);
        transform: translateY(-50%);
        pointer-events: none;
    `;
    const yAxis = document.createElement('div');
    yAxis.style.cssText = `
        position: absolute;
        top: 0;
        left: 50%;
        width: 2px;
        height: 100%;
        background: rgba(255,107,53,0.3);
        transform: translateX(-50%);
        pointer-events: none;
    `;

    const marker = document.createElement('div');
    marker.className = 'grid-marker';
    marker.style.cssText = `
        position: absolute;
        width: 16px;
        height: 16px;
        background: var(--primary);
        border: 3px solid white;
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 15px var(--primary);
        transition: all 0.1s ease;
        pointer-events: none;
        z-index: 10;
    `;

    gridDiv.appendChild(xAxis);
    gridDiv.appendChild(yAxis);
    gridDiv.appendChild(marker);

    function updateMarkerPosition() {
        const left = half + (category.x / 5) * half;
        const top = half - (category.y / 5) * half;
        marker.style.left = `${Math.min(gridSize, Math.max(0, left))}px`;
        marker.style.top = `${Math.min(gridSize, Math.max(0, top))}px`;
    }

    gridDiv.addEventListener('click', (e) => {
        const rect = gridDiv.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        let newX = ((x / gridSize) * 10 - 5).toFixed(1);
        let newY = ((1 - y / gridSize) * 10 - 5).toFixed(1);

        newX = Math.min(5, Math.max(-5, parseFloat(newX)));
        newY = Math.min(5, Math.max(-5, parseFloat(newY)));

        category.x = newX;
        category.y = newY;

        updateMarkerPosition();
        updateCategoryDisplay();
    });

    const valuesDiv = document.createElement('div');
    valuesDiv.className = 'category-values';
    valuesDiv.style.cssText = `
        display: flex;
        justify-content: space-between;
        margin-top: 10px;
        font-size: 1rem;
        color: var(--text-primary);
    `;

    function updateCategoryDisplay() {
        const xEmoji = category.x >= 0 ? 'üòä' : 'üòû';
        const yEmoji = category.y >= 0 ? '‚ö°' : 'üò¥';
        valuesDiv.innerHTML = `
            <span>${xEmoji} –°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ: ${category.x}</span>
            <span>${yEmoji} –≠–Ω–µ—Ä–≥–∏—è: ${category.y}</span>
        `;
    }

    gridDiv.appendChild(valuesDiv);
    container.appendChild(gridDiv);
    
    updateMarkerPosition();
    updateCategoryDisplay();
}

function renderQuizCategories() {
    const quizContent = document.getElementById('quizContent');
    quizContent.innerHTML = '';

    const container = document.createElement('div');
    container.className = 'categories-container';
    container.style.cssText = `
        display: flex;
        flex-direction: column;
        gap: 30px;
        margin-bottom: 30px;
    `;

    wellBeingQuiz.categories.forEach(category => {
        const categoryBlock = document.createElement('div');
        categoryBlock.className = `category-block ${category.id}`;
        categoryBlock.style.cssText = `
            background: rgba(255,107,53,0.05);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid var(--theme-border);
        `;

        const title = document.createElement('h3');
        title.style.cssText = `
            color: var(--primary);
            font-size: 1.5rem;
            margin-bottom: 15px;
            text-align: center;
            font-family: var(--font-logo);
        `;
        title.textContent = category.name;

        categoryBlock.appendChild(title);
        createCategoryGrid(category, categoryBlock);
        container.appendChild(categoryBlock);
    });

    quizContent.appendChild(container);
    
    document.getElementById('prevBtn').style.display = 'none';
    document.getElementById('nextBtn').innerHTML = '–ó–∞–≤–µ—Ä—à–∏—Ç—å <i class="fas fa-check"></i>';
    document.getElementById('progressText').textContent = '–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏';
}

function startQuiz() {
    wellBeingQuiz.categories.forEach(cat => { cat.x = 0; cat.y = 0; });

    const mainCircle = document.getElementById('mainCircle');
    mainCircle.classList.add('hidden');

    setTimeout(() => {
        const quizScreen = document.getElementById('fullscreenQuiz');
        quizScreen.classList.add('active');
        document.body.style.overflow = 'hidden';
        renderQuizCategories();
    }, 300);
}

function showResults() {
    const totalScore = wellBeingQuiz.calculateScore();

    let result;
    if (totalScore >= 12) result = wellBeingQuiz.recommendations[12];
    else if (totalScore >= 9) result = wellBeingQuiz.recommendations[9];
    else if (totalScore >= 6) result = wellBeingQuiz.recommendations[6];
    else result = wellBeingQuiz.recommendations[3];

    document.getElementById('quizContent').classList.add('hidden');
    document.getElementById('resultsScreen').classList.remove('hidden');

    document.getElementById('moodEmoji').textContent = result.emoji;
    document.getElementById('finalScore').textContent = `${Math.round(totalScore * 10) / 10}/15`;

    const list = document.getElementById('recommendationsList');
    list.innerHTML = '';
    result.tips.forEach(tip => {
        const li = document.createElement('li');
        li.innerHTML = `<i class="fas fa-check-circle"></i> ${tip}`;
        list.appendChild(li);
    });

    window.lastQuizResult = {
        score: totalScore,
        title: result.title,
        emoji: result.emoji
    };
}

function initQuiz() {
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const closeBtn = document.getElementById('closeQuizBtn');
    const quizScreen = document.getElementById('fullscreenQuiz');

    prevBtn.style.display = 'none';

    nextBtn.addEventListener('click', function() {
        showResults();
    });

    closeBtn.addEventListener('click', function() {
        quizScreen.classList.remove('active');
        document.body.style.overflow = 'auto';
        showResultCircle();
    });
}

function showResultCircle() {
    if (!window.lastQuizResult) return;

    const mainCircle = document.getElementById('mainCircle');
    const resultCircle = document.getElementById('resultCircle');

    document.getElementById('resultEmoji').textContent = window.lastQuizResult.emoji;
    document.getElementById('resultTitle').textContent = window.lastQuizResult.title;
    document.getElementById('resultScore').textContent = `${Math.round(window.lastQuizResult.score * 10) / 10}/15`;

    mainCircle.classList.add('hidden');
    resultCircle.classList.remove('hidden');
}

function resetQuiz() {
    const mainCircle = document.getElementById('mainCircle');
    const resultCircle = document.getElementById('resultCircle');
    const quizScreen = document.getElementById('fullscreenQuiz');

    resultCircle.classList.add('hidden');
    mainCircle.classList.remove('hidden');

    quizScreen.classList.remove('active');
    document.getElementById('quizContent').classList.remove('hidden');
    document.getElementById('resultsScreen').classList.add('hidden');
    document.body.style.overflow = 'auto';

    delete window.lastQuizResult;
}
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            initThemeSwitcher();
            initMainCircle();
            initQuiz();
            initTasksWidget();
            initWorldTimeWidget();
            initRecommendationsWidget();
            initWidgetManager();
            updateWorldTime();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
            setInterval(updateWorldTime, 60000);
            
            console.log('GLOX —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω!');
        });
        
        // –¢–µ–º–∞
        function initThemeSwitcher() {
            const darkBtn = document.getElementById('darkThemeBtn');
            const lightBtn = document.getElementById('lightThemeBtn');
            const body = document.body;
            
            const savedTheme = localStorage.getItem('gloxTheme') || 'dark';
            if (savedTheme === 'light') {
                body.classList.add('light-theme');
                darkBtn.classList.remove('active');
                lightBtn.classList.add('active');
            }
            
            darkBtn.addEventListener('click', function() {
                body.classList.remove('light-theme');
                darkBtn.classList.add('active');
                lightBtn.classList.remove('active');
                localStorage.setItem('gloxTheme', 'dark');
            });
            
            lightBtn.addEventListener('click', function() {
                body.classList.add('light-theme');
                lightBtn.classList.add('active');
                darkBtn.classList.remove('active');
                localStorage.setItem('gloxTheme', 'light');
            });
        }
        
        // –ì–ª–∞–≤–Ω—ã–π –∫—Ä—É–≥
        function initMainCircle() {
            const mainCircle = document.getElementById('mainCircle');
            const resultCircle = document.getElementById('resultCircle');
            
            mainCircle.addEventListener('click', function() {
                startQuiz();
            });
            
            resultCircle.addEventListener('click', function() {
                resetQuiz();
            });
        }
        
        // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–∞
        function startQuiz() {
            currentQuestion = 0;
            userAnswers = [];
            
            const mainCircle = document.getElementById('mainCircle');
            mainCircle.classList.add('hidden');
            
            setTimeout(() => {
                document.getElementById('fullscreenQuiz').classList.add('active');
                document.body.style.overflow = 'hidden';
                loadQuestion();
            }, 300);
        }
        
        // –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–∞
        function loadQuestion() {
            const question = wellBeingQuiz.questions[currentQuestion];
            document.getElementById('questionText').textContent = question.question;
            
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionEl = document.createElement('div');
                optionEl.className = 'quiz-option';
                optionEl.innerHTML = `
                    <div style="font-size: 1.5rem; margin-bottom: 5px;">${option.emoji}</div>
                    <div>${option.text}</div>
                `;
                optionEl.dataset.index = index;
                
                if (userAnswers[currentQuestion] === index) {
                    optionEl.classList.add('selected');
                }
                
                optionEl.addEventListener('click', function() {
                    document.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    this.classList.add('selected');
                    userAnswers[currentQuestion] = parseInt(this.dataset.index);
                });
                
                optionsContainer.appendChild(optionEl);
            });
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === wellBeingQuiz.questions.length - 1 ? '–ó–∞–≤–µ—Ä—à–∏—Ç—å' : '–î–∞–ª–µ–µ';
            document.getElementById('progressText').textContent = `–í–æ–ø—Ä–æ—Å ${currentQuestion + 1} –∏–∑ ${wellBeingQuiz.questions.length}`;
        }
        
        // –ö–≤–∏–∑
        function initQuiz() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            const closeBtn = document.getElementById('closeQuizBtn');
            const quizScreen = document.getElementById('fullscreenQuiz');
            
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 0) {
                    currentQuestion--;
                    loadQuestion();
                }
            });
            
            nextBtn.addEventListener('click', function() {
                if (userAnswers[currentQuestion] === undefined) {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ –æ—Ç–≤–µ—Ç');
                    return;
                }
                
                if (currentQuestion < wellBeingQuiz.questions.length - 1) {
                    currentQuestion++;
                    loadQuestion();
                } else {
                    showResults();
                }
            });
            
            closeBtn.addEventListener('click', function() {
                quizScreen.classList.remove('active');
                document.body.style.overflow = 'auto';
                showResultCircle();
            });
        }
        
        // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
        function showResults() {
            let totalScore = 0;
            userAnswers.forEach((answerIndex, questionIndex) => {
                if (answerIndex !== undefined) {
                    const question = wellBeingQuiz.questions[questionIndex];
                    totalScore += question.options[answerIndex].value;
                }
            });
            
            let result;
            if (totalScore >= 12) result = wellBeingQuiz.recommendations[12];
            else if (totalScore >= 9) result = wellBeingQuiz.recommendations[9];
            else if (totalScore >= 6) result = wellBeingQuiz.recommendations[6];
            else result = wellBeingQuiz.recommendations[3];
            
            document.getElementById('quizContent').classList.add('hidden');
            document.getElementById('resultsScreen').classList.remove('hidden');
            
            document.getElementById('moodEmoji').textContent = result.emoji;
            document.getElementById('finalScore').textContent = `${totalScore}/15`;
            
            const list = document.getElementById('recommendationsList');
            list.innerHTML = '';
            result.tips.forEach(tip => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-check-circle"></i> ${tip}`;
                list.appendChild(li);
            });
            
            window.lastQuizResult = {
                score: totalScore,
                title: result.title,
                emoji: result.emoji
            };
        }
        
        // –ö—Ä—É–≥ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
        function showResultCircle() {
            if (!window.lastQuizResult) return;
            
            const mainCircle = document.getElementById('mainCircle');
            const resultCircle = document.getElementById('resultCircle');
            
            document.getElementById('resultEmoji').textContent = window.lastQuizResult.emoji;
            document.getElementById('resultTitle').textContent = window.lastQuizResult.title;
            document.getElementById('resultScore').textContent = `${window.lastQuizResult.score}/15`;
            
            mainCircle.classList.add('hidden');
            resultCircle.classList.remove('hidden');
        }
        
        // –°–±—Ä–æ—Å
        function resetQuiz() {
            const mainCircle = document.getElementById('mainCircle');
            const resultCircle = document.getElementById('resultCircle');
            const quizScreen = document.getElementById('fullscreenQuiz');
            
            resultCircle.classList.add('hidden');
            mainCircle.classList.remove('hidden');
            
            quizScreen.classList.remove('active');
            document.getElementById('quizContent').classList.remove('hidden');
            document.getElementById('resultsScreen').classList.add('hidden');
            document.body.style.overflow = 'auto';
            
            delete window.lastQuizResult;
        }
        
        // –í–∏–¥–∂–µ—Ç –∑–∞–¥–∞—á
        function initTasksWidget() {
            const tasksContent = document.getElementById('tasksContent');
            
            function renderTasks() {
                tasksContent.innerHTML = '';
                appData.tasks.forEach(task => {
                    const taskItem = document.createElement('div');
                    taskItem.style.cssText = 'display: flex; align-items: center; gap: 15px; padding: 12px; margin-bottom: 10px; background: rgba(255, 107, 53, 0.05); border-radius: 8px;';
                    
                    taskItem.innerHTML = `
                        <input type="checkbox" ${task.completed ? 'checked' : ''} 
                               style="width: 20px; height: 20px; cursor: pointer;">
                        <div style="flex: 1; ${task.completed ? 'text-decoration: line-through; color: var(--text-dim);' : ''}">
                            ${task.text}
                        </div>
                    `;
                    
                    const checkbox = taskItem.querySelector('input');
                    checkbox.addEventListener('change', function() {
                        task.completed = this.checked;
                        renderTasks();
                    });
                    
                    tasksContent.appendChild(taskItem);
                });
            }
            
            document.querySelector('#tasksWidget .add-task-btn').addEventListener('click', function() {
                const taskText = prompt('–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É:');
                if (taskText) {
                    appData.tasks.push({
                        id: Date.now(),
                        text: taskText,
                        completed: false
                    });
                    renderTasks();
                }
            });
            
            document.querySelector('#tasksWidget .close-btn').addEventListener('click', function() {
                document.getElementById('tasksWidget').style.display = 'none';
                setTimeout(() => {
                    document.getElementById('tasksWidget').style.display = 'block';
                }, 5000);
            });
            
            renderTasks();
        }
        
        // –í–∏–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
        function initWorldTimeWidget() {
            updateWorldTime();
            
            document.querySelector('#worldTimeWidget .refresh-time-btn').addEventListener('click', updateWorldTime);
            
            document.querySelector('#worldTimeWidget .close-btn').addEventListener('click', function() {
                document.getElementById('worldTimeWidget').style.display = 'none';
                setTimeout(() => {
                    document.getElementById('worldTimeWidget').style.display = 'block';
                }, 5000);
            });
        }
        
        function updateWorldTime() {
            const timeZones = [
                { city: '–ú–æ—Å–∫–≤–∞', offset: 3 },
                { city: '–õ–æ–Ω–¥–æ–Ω', offset: 0 },
                { city: '–ù—å—é-–ô–æ—Ä–∫', offset: -5 },
                { city: '–¢–æ–∫–∏–æ', offset: 9 }
            ];
            
            const now = new Date();
            const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
            
            let html = '';
            timeZones.forEach(zone => {
                const localTime = new Date(utc + (3600000 * zone.offset));
                const timeString = localTime.toLocaleTimeString('ru-RU', { 
                    hour: '2-digit', 
                    minute: '2-digit',
                    hour12: false 
                });
                
                html += `
                    <div class="time-zone">
                        <div class="time-city">${zone.city}</div>
                        <div class="time-display">${timeString}</div>
                        <div style="color: var(--text-dim); font-size: 0.9rem;">
                            GMT${zone.offset >= 0 ? '+' : ''}${zone.offset}
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('worldTimeContent').innerHTML = html;
        }
        
        // –í–∏–¥–∂–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
        function initRecommendationsWidget() {
            const recContent = document.getElementById('recContent');
            
            function renderRecommendations() {
                recContent.innerHTML = '';
                appData.recommendations.forEach(rec => {
                    const recCard = document.createElement('div');
                    recCard.style.cssText = 'background: rgba(255, 107, 53, 0.05); border-radius: 10px; padding: 15px; margin-bottom: 15px; border: 1px solid var(--theme-border); cursor: pointer;';
                    recCard.innerHTML = `
                        <div style="display: flex; align-items: center; gap: 15px; margin-bottom: 10px;">
                            <div style="font-size: 1.5rem; color: var(--primary);">
                                <i class="${rec.icon}"></i>
                            </div>
                            <h4 style="color: var(--text-primary); margin: 0;">${rec.title}</h4>
                        </div>
                        <p style="color: var(--text-secondary); margin: 0;">${rec.description}</p>
                    `;
                    
                    recCard.addEventListener('click', function() {
                        alert(`${rec.title}\n\n${rec.description}`);
                    });
                    
                    recContent.appendChild(recCard);
                });
            }
            
            document.querySelector('#recWidget .refresh-btn').addEventListener('click', renderRecommendations);
            
            document.querySelector('#recWidget .close-btn').addEventListener('click', function() {
                document.getElementById('recWidget').style.display = 'none';
                setTimeout(() => {
                    document.getElementById('recWidget').style.display = 'block';
                }, 5000);
            });
            
            renderRecommendations();
        }
        
        // –ú–µ–Ω–µ–¥–∂–µ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤
        function initWidgetManager() {
            const managerBtn = document.getElementById('addWidgetBtn');
            const manager = document.getElementById('widgetManager');
            const closeBtn = document.getElementById('closeManagerBtn');
            const availableWidgets = document.getElementById('availableWidgets');
            
            managerBtn.addEventListener('click', function() {
                manager.classList.add('active');
                document.body.style.overflow = 'hidden';
                renderAvailableWidgets();
            });
            
            closeBtn.addEventListener('click', function() {
                manager.classList.remove('active');
                document.body.style.overflow = 'auto';
            });
            
            manager.addEventListener('click', function(e) {
                if (e.target === manager) {
                    manager.classList.remove('active');
                    document.body.style.overflow = 'auto';
                }
            });
            
            function renderAvailableWidgets() {
                availableWidgets.innerHTML = '';
                appData.availableWidgets.forEach(widget => {
                    const isActive = appData.activeWidgets.includes(widget.id);
                    const widgetEl = document.createElement('div');
                    widgetEl.className = 'widget-preview';
                    widgetEl.innerHTML = `
                        <div style="font-size: 2rem; color: ${isActive ? 'var(--primary)' : 'var(--text-dim)'}; margin-bottom: 10px;">
                            <i class="${widget.icon}"></i>
                        </div>
                        <h4 style="color: ${isActive ? 'var(--text-primary)' : 'var(--text-dim)'}; margin-bottom: 5px;">
                            ${widget.name}
                        </h4>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 10px;">
                            ${widget.description}
                        </p>
                        <div style="color: ${isActive ? 'var(--primary)' : 'var(--text-dim)'};">
                            ${isActive ? '‚úì –ê–∫—Ç–∏–≤–µ–Ω' : '–ù–µ –∞–∫—Ç–∏–≤–µ–Ω'}
                        </div>
                    `;
                    
                    widgetEl.addEventListener('click', function() {
                        toggleWidget(widget.id);
                        renderAvailableWidgets();
                    });
                    
                    availableWidgets.appendChild(widgetEl);
                });
            }
            
            function toggleWidget(widgetId) {
                const index = appData.activeWidgets.indexOf(widgetId);
                if (index > -1) {
                    appData.activeWidgets.splice(index, 1);
                    document.getElementById(widgetId + 'Widget').style.display = 'none';
                } else {
                    appData.activeWidgets.push(widgetId);
                    document.getElementById(widgetId + 'Widget').style.display = 'block';
                }
            }
        }
    </script>
</body>
</html>
