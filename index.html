<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GLOX - –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –æ–ø—Ä–æ—Å–æ–≤</title>
    <link rel="icon" type="image/png" href="logomini.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Zalando+Sans+Expanded:wght@700&family=Oswald:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <style>
        /* –ë–∞–∑–æ–≤—ã–µ —Å—Ç–∏–ª–∏ (–æ—Å—Ç–∞–≤–ª—è–µ–º –≤–∞—à–∏) */
        body { font-family: 'Oswald', sans-serif; background-color: #f5f5f5; color: #222; margin: 20px; }
        h1 { font-family: 'Zalando Sans Expanded', sans-serif; color: #111; }
        
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ä–æ—Å–æ–≤ */
        :root {
            --primary: #FF6B35;
            --primary-dark: #D45A2C;
            --primary-light: #FF8C5A;
            --primary-glow: rgba(255, 107, 53, 0.3);
            --bg-gradient: linear-gradient(135deg, #121212 0%, #1A1A1A 100%);
            --card-bg: rgba(40, 40, 40, 0.9);
            --border-color: #333333;
            --text-primary: #FFFFFF;
            --text-secondary: #CCCCCC;
            --text-dim: #888888;
            --font-logo: 'Zalando Sans Expanded', sans-serif;
            --font-main: 'Oswald', sans-serif;
            --success: #4CAF50;
            --warning: #FFC107;
            --danger: #F44336;
        }
        
        .light-theme {
            --card-bg: #FFFFFF;
            --border-color: #DDDDDD;
            --text-primary: #222222;
            --text-secondary: #555555;
            --text-dim: #777777;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏ */
        .coordinate-grid {
            position: relative;
            width: 250px;
            height: 250px;
            margin: 20px auto;
            background: var(--card-bg);
            border: 2px solid var(--primary);
            border-radius: 12px;
            cursor: crosshair;
            box-shadow: 0 0 20px var(--primary-glow);
        }
        
        .grid-axis {
            position: absolute;
            background: rgba(255, 107, 53, 0.2);
        }
        
        .grid-axis-x {
            top: 50%;
            left: 0;
            width: 100%;
            height: 2px;
            transform: translateY(-50%);
        }
        
        .grid-axis-y {
            top: 0;
            left: 50%;
            width: 2px;
            height: 100%;
            transform: translateX(-50%);
        }
        
        .grid-marker {
            position: absolute;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border: 3px solid white;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 20px var(--primary);
            transition: all 0.2s ease;
            z-index: 10;
        }
        
        .grid-marker::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, var(--primary-glow) 0%, transparent 70%);
            transform: translate(-50%, -50%);
            border-radius: 50%;
            pointer-events: none;
        }
        
        /* –ü–æ–ª–∑—É–Ω–∫–∏ */
        .slider-container {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }
        
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            color: var(--text-primary);
        }
        
        .slider-value {
            color: var(--primary);
            font-weight: bold;
        }
        
        input[type=range] {
            width: 100%;
            height: 8px;
            background: linear-gradient(to right, #F44336, #FFC107, #4CAF50);
            border-radius: 4px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            background: var(--primary);
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 0 10px var(--primary);
        }
        
        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–ø—Ä–æ—Å–∞ */
        .quiz-category {
            margin-bottom: 30px;
            padding: 20px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--border-color);
        }
        
        .category-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .category-icon {
            width: 50px;
            height: 50px;
            background: rgba(255, 107, 53, 0.1);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary);
        }
        
        .category-title {
            font-size: 1.5rem;
            color: var(--primary);
            font-family: var(--font-logo);
        }
        
        .category-values {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
            padding: 10px;
            background: rgba(255, 107, 53, 0.05);
            border-radius: 8px;
        }
        
        .value-badge {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 1rem;
        }
        
        .value-x { background: rgba(255, 107, 53, 0.2); color: var(--primary); }
        .value-y { background: rgba(76, 175, 80, 0.2); color: #4CAF50; }
        
        /* –≠–º–æ–¥–∑–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è */
        .mood-emojis {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 1.2rem;
        }
        
        /* –ü—Ä–æ–≥—Ä–µ—Å—Å */
        .quiz-progress-bar {
            height: 6px;
            background: rgba(255, 107, 53, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .quiz-progress-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
        .quiz-nav-buttons {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-top: 30px;
        }
        
        .quiz-nav-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            background: var(--primary);
            color: white;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .quiz-nav-btn:hover:not(:disabled) {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        
        .quiz-nav-btn:disabled {
            background: var(--text-dim);
            cursor: not-allowed;
            opacity: 0.5;
        }
        
        .quiz-nav-btn.secondary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }
        
        .quiz-nav-btn.secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        /* –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è */
        .completion-indicator {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
            color: var(--success);
        }
        
        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 768px) {
            .coordinate-grid {
                width: 200px;
                height: 200px;
            }
            
            .category-header {
                flex-direction: column;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <!-- –í–∞—à —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ —Å —Ç–µ–º–æ–π –∏ –ª–æ–≥–æ—Ç–∏–ø–æ–º -->
    <div class="theme-controls">
        <button class="theme-btn active" id="darkThemeBtn"><i class="fas fa-moon"></i></button>
        <button class="theme-btn" id="lightThemeBtn"><i class="fas fa-sun"></i></button>
    </div>
    
    <div class="logo-container">
        <img src="logo.png" class="logo-icon" alt="GLOX">
        <h1 class="logo-text">GLOX</h1>
    </div>
    
    <div class="philosophy-quote">
        "–í—Å–µ, —á—Ç–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç"
    </div>
    
    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω -->
    <main class="main-screen">
        <div class="glowing-circle" id="mainCircle">
            <div class="circle-content">
                <div class="status-indicator"></div>
                <h2>–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
            </div>
        </div>
        
        <div class="glowing-circle hidden" id="resultCircle">
            <div class="circle-content">
                <div id="resultEmoji" class="mood-emoji"></div>
                <h2 id="resultTitle"></h2>
                <p id="resultScore" class="mood-score"></p>
                <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–∞</p>
            </div>
        </div>
    </main>
    
    <!-- –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –û–ü–†–û–°–û–í -->
    <div class="fullscreen-quiz" id="fullscreenQuiz">
        <div class="quiz-container">
            <div class="quiz-header">
                <h2 class="quiz-title">–¢–ï–°–¢ –°–ê–ú–û–ß–£–í–°–¢–í–ò–Ø</h2>
                <p class="quiz-subtitle">–û—Ü–µ–Ω–∏—Ç–µ —Å–≤–æ—ë —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ —Ç—Ä—ë–º –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</p>
                <div class="quiz-progress-bar">
                    <div class="quiz-progress-fill" id="quizProgress"></div>
                </div>
            </div>
            
            <div id="newQuizContent">
                <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            
            <div class="quiz-nav-buttons">
                <button class="quiz-nav-btn secondary" id="newPrevBtn" disabled>
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <button class="quiz-nav-btn" id="newNextBtn">
                    –î–∞–ª–µ–µ <i class="fas fa-arrow-right"></i>
                </button>
                <button class="quiz-nav-btn" id="newSubmitBtn" style="display: none;">
                    –ó–∞–≤–µ—Ä—à–∏—Ç—å <i class="fas fa-check"></i>
                </button>
            </div>
            
            <div class="completion-indicator" id="completionIndicator" style="display: none;">
                <i class="fas fa-check-circle"></i>
                <span>–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ü–µ–Ω–µ–Ω—ã</span>
            </div>
        </div>
    </div>
    
    <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
    <div class="fullscreen-quiz" id="resultsQuiz">
        <div class="quiz-container">
            <div class="results-screen">
                <h2 class="mood-title">–í–ê–® –†–ï–ó–£–õ–¨–¢–ê–¢</h2>
                <div id="finalMoodEmoji" class="mood-emoji"></div>
                <div id="finalScore" class="mood-score"></div>
                
                <div class="recommendations">
                    <h4>–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ù–ê –î–ï–ù–¨</h4>
                    <ul id="finalRecommendationsList"></ul>
                </div>
                
                <div class="category-breakdown" id="categoryBreakdown" style="margin: 20px 0; padding: 15px; background: rgba(255,107,53,0.05); border-radius: 10px;"></div>
                
                <button class="quiz-btn" id="newCloseQuizBtn">
                    <i class="fas fa-check"></i> –ó–ê–í–ï–†–®–ò–¢–¨
                </button>
                
                <button class="quiz-btn" id="redoQuizBtn" style="margin-top: 10px; background: transparent; border: 2px solid var(--primary);">
                    <i class="fas fa-redo"></i> –ü–†–û–ô–¢–ò –ó–ê–ù–û–í–û
                </button>
            </div>
        </div>
    </div>
    
    <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–≤–∏–¥–∂–µ—Ç—ã, –∏—Å—Ç–æ—Ä–∏—è –∏ —Ç.–¥.) -->
    <button class="add-widget-btn" id="addWidgetBtn">
        <i class="fas fa-layer-group"></i> –£–ü–†–ê–í–õ–ï–ù–ò–ï –í–ò–î–ñ–ï–¢–ê–ú–ò
    </button>
    
    <div class="widgets-area" id="widgetsArea">
        <!-- –í–∏–¥–∂–µ—Ç—ã (–≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ) -->
    </div>
    
    <div class="glox-history">
        <h2 class="history-title">–ü–£–¢–¨ GLOX</h2>
        <div class="history-content">
            <p>–ü—Ä–æ–µ–∫—Ç GLOX –≤—ã—Ä–æ—Å –∏–∑ ¬´–ó–∞–∫–æ–Ω–∞ –í–æ–ª—Ç–µ—Ä–∞¬ª ‚Äî –∏–¥–µ–∏ –æ —Ç–æ–º, —á—Ç–æ –º–∏—Ä –∏ —Å–æ–±—ã—Ç–∏—è –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã –±–∏–Ω–∞—Ä–Ω—ã–º–∏ –∏—Å—Ö–æ–¥–∞–º–∏ –∏ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∫—Ä—ã—Ç—ã–µ –≤–µ—Ç–≤–∏ —Ä–∞–∑–≤–∏—Ç–∏—è.</p>
        </div>
    </div>
    
    <div class="footer">GLOX ¬© 2026. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</div>
    
    <script>
        // ==================== –ù–û–í–ê–Ø –°–ò–°–¢–ï–ú–ê –û–ü–†–û–°–û–í ====================
        const wellBeingQuiz = {
            categories: [
                { 
                    id: 'sleep', 
                    name: '–°–û–ù', 
                    icon: 'üò¥',
                    x: 0, 
                    y: 0,
                    questions: [
                        { text: '–ö–∞–∫ –≤—ã —Å–ø–∞–ª–∏?', emoji: 'üò¥' },
                        { text: '–ß—É–≤—Å—Ç–≤—É–µ—Ç–µ –ª–∏ –≤—ã –±–æ–¥—Ä–æ—Å—Ç—å?', emoji: '‚ö°' }
                    ]
                },
                { 
                    id: 'mood', 
                    name: '–ù–ê–°–¢–†–û–ï–ù–ò–ï', 
                    icon: 'üòä',
                    x: 0, 
                    y: 0,
                    questions: [
                        { text: '–ö–∞–∫–æ–µ —É –≤–∞—Å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ?', emoji: 'üòä' },
                        { text: '–ï—Å—Ç—å –ª–∏ –º–æ—Ç–∏–≤–∞—Ü–∏—è?', emoji: 'üéØ' }
                    ]
                },
                { 
                    id: 'physical', 
                    name: '–§–ò–ó–ò–ß–ï–°–ö–û–ï –°–û–°–¢–û–Ø–ù–ò–ï', 
                    icon: 'üí™',
                    x: 0, 
                    y: 0,
                    questions: [
                        { text: '–ö–∞–∫ –≤—ã —Å–µ–±—è —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —á—É–≤—Å—Ç–≤—É–µ—Ç–µ?', emoji: 'üí™' },
                        { text: '–ï—Å—Ç—å –ª–∏ —ç–Ω–µ—Ä–≥–∏—è –¥–ª—è –¥–µ–ª?', emoji: '‚ö°' }
                    ]
                }
            ],
            
            recommendations: {
                perfect: {
                    title: "–ò–î–ï–ê–õ–¨–ù–û!",
                    emoji: "üåü",
                    minScore: 12,
                    tips: [
                        "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–≤–æ—é —ç–Ω–µ—Ä–≥–∏—é –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á",
                        "–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Ö–æ—Ä–æ—à–∏–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º —Å –¥—Ä—É–≥–∏–º–∏",
                        "–ó–∞–ø–ª–∞–Ω–∏—Ä—É–π—Ç–µ —á—Ç–æ-—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –Ω–∞ –≤–µ—á–µ—Ä",
                        "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–æ–≤–æ–µ —Ö–æ–±–±–∏"
                    ]
                },
                good: {
                    title: "–•–û–†–û–®–û",
                    emoji: "üòä",
                    minScore: 9,
                    tips: [
                        "–°–æ—Å—Ç–∞–≤—å—Ç–µ –ø–ª–∞–Ω –Ω–∞ –¥–µ–Ω—å",
                        "–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å",
                        "–°–¥–µ–ª–∞–π—Ç–µ –Ω–µ–±–æ–ª—å—à—É—é –ø—Ä–æ–≥—É–ª–∫—É",
                        "–ü–æ–æ–±—â–∞–π—Ç–µ—Å—å —Å –±–ª–∏–∑–∫–∏–º–∏"
                    ]
                },
                normal: {
                    title: "–ù–û–†–ú–ê–õ–¨–ù–û",
                    emoji: "üôÇ",
                    minScore: 6,
                    tips: [
                        "–ù–∞—á–Ω–∏—Ç–µ —Å –ª—ë–≥–∫–∏—Ö –∑–∞–¥–∞—á",
                        "–°–¥–µ–ª–∞–π—Ç–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø–µ—Ä–µ—Ä—ã–≤",
                        "–ü–æ—Å–ª—É—à–∞–π—Ç–µ –ª—é–±–∏–º—É—é –º—É–∑—ã–∫—É",
                        "–í—ã–ø–µ–π—Ç–µ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π"
                    ]
                },
                low: {
                    title: "–¢–†–ï–í–û–ñ–ù–û",
                    emoji: "üòî",
                    minScore: 3,
                    tips: [
                        "–û—Ç–¥–æ—Ö–Ω–∏—Ç–µ 15-20 –º–∏–Ω—É—Ç",
                        "–í—ã–ø–µ–π—Ç–µ —Ç—Ä–∞–≤—è–Ω–æ–π —á–∞–π",
                        "–°–¥–µ–ª–∞–π—Ç–µ –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è",
                        "–ü–æ–≥–æ–≤–æ—Ä–∏—Ç–µ —Å –∫–µ–º-—Ç–æ –±–ª–∏–∑–∫–∏–º"
                    ]
                }
            },
            
            calculateTotalScore() {
                let totalX = 0, totalY = 0;
                this.categories.forEach(cat => {
                    totalX += cat.x;
                    totalY += cat.y;
                });
                return (totalX + totalY) / 2;
            },
            
            getResultByScore(score) {
                if (score >= 12) return this.recommendations.perfect;
                if (score >= 9) return this.recommendations.good;
                if (score >= 6) return this.recommendations.normal;
                return this.recommendations.low;
            },
            
            getColorForValue(value) {
                const colors = ['#F44336', '#FF5722', '#FFC107', '#8BC34A', '#4CAF50'];
                const index = Math.floor((value + 5) / 2);
                return colors[Math.min(4, Math.max(0, index))];
            }
        };

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–ø—Ä–æ—Å–Ω–∏–∫–∞
        let currentCategoryIndex = 0;
        let isEditing = false;

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–æ–π —Å–µ—Ç–∫–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function createCoordinateGrid(category, container) {
            const gridSize = 250;
            const half = gridSize / 2;
            
            const gridDiv = document.createElement('div');
            gridDiv.className = 'coordinate-grid';
            
            // –û—Å–∏
            const xAxis = document.createElement('div');
            xAxis.className = 'grid-axis grid-axis-x';
            const yAxis = document.createElement('div');
            yAxis.className = 'grid-axis grid-axis-y';
            
            // –ú–∞—Ä–∫–µ—Ä
            const marker = document.createElement('div');
            marker.className = 'grid-marker';
            
            // –ü–æ–¥–ø–∏—Å–∏ –æ—Å–µ–π
            const labels = document.createElement('div');
            labels.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                color: var(--text-dim);
                font-size: 12px;
            `;
            labels.innerHTML = `
                <div style="position: absolute; top: 5px; left: 50%; transform: translateX(-50%);">üòä –•–æ—Ä–æ—à–æ</div>
                <div style="position: absolute; bottom: 5px; left: 50%; transform: translateX(-50%);">üòû –ü–ª–æ—Ö–æ</div>
                <div style="position: absolute; left: 5px; top: 50%; transform: translateY(-50%);">üò¥ –¢—è–∂–µ–ª–æ</div>
                <div style="position: absolute; right: 5px; top: 50%; transform: translateY(-50%);">‚ö° –õ–µ–≥–∫–æ</div>
            `;
            
            gridDiv.appendChild(xAxis);
            gridDiv.appendChild(yAxis);
            gridDiv.appendChild(labels);
            gridDiv.appendChild(marker);
            
            function updateMarkerPosition() {
                const left = half + (category.x / 5) * half;
                const top = half - (category.y / 5) * half;
                marker.style.left = `${Math.min(gridSize, Math.max(0, left))}px`;
                marker.style.top = `${Math.min(gridSize, Math.max(0, top))}px`;
                marker.style.background = wellBeingQuiz.getColorForValue((category.x + category.y) / 2);
            }
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–ª–∏–∫–∞
            gridDiv.addEventListener('click', (e) => {
                const rect = gridDiv.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                let newX = ((x / gridSize) * 10 - 5).toFixed(1);
                let newY = ((1 - y / gridSize) * 10 - 5).toFixed(1);
                
                newX = Math.min(5, Math.max(-5, parseFloat(newX)));
                newY = Math.min(5, Math.max(-5, parseFloat(newY)));
                
                category.x = newX;
                category.y = newY;
                
                updateMarkerPosition();
                updateCategoryDisplay(category, container);
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å
                showClarifyingQuestion(category);
            });
            
            updateMarkerPosition();
            return gridDiv;
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–æ–≤ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function createSliders(category, container) {
            const slidersDiv = document.createElement('div');
            slidersDiv.className = 'slider-container';
            
            // –ü–æ–ª–∑—É–Ω–æ–∫ –¥–ª—è X (—Å–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ)
            const xSlider = createSlider('–°–∞–º–æ—á—É–≤—Å—Ç–≤–∏–µ', category.x, -5, 5, (value) => {
                category.x = value;
                updateCategoryDisplay(category, container);
                updateGridMarker(category, container);
            });
            
            // –ü–æ–ª–∑—É–Ω–æ–∫ –¥–ª—è Y (—ç–Ω–µ—Ä–≥–∏—è)
            const ySlider = createSlider('–≠–Ω–µ—Ä–≥–∏—è', category.y, -5, 5, (value) => {
                category.y = value;
                updateCategoryDisplay(category, container);
                updateGridMarker(category, container);
            });
            
            slidersDiv.appendChild(xSlider);
            slidersDiv.appendChild(ySlider);
            
            return slidersDiv;
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–∑—É–Ω–∫–∞
        function createSlider(label, value, min, max, onChange) {
            const container = document.createElement('div');
            container.style.marginBottom = '15px';
            
            const labelDiv = document.createElement('div');
            labelDiv.className = 'slider-label';
            labelDiv.innerHTML = `
                <span>${label}</span>
                <span class="slider-value">${value.toFixed(1)}</span>
            `;
            
            const input = document.createElement('input');
            input.type = 'range';
            input.min = min;
            input.max = max;
            input.step = 0.1;
            input.value = value;
            input.style.width = '100%';
            
            input.addEventListener('input', (e) => {
                const val = parseFloat(e.target.value);
                labelDiv.querySelector('.slider-value').textContent = val.toFixed(1);
                onChange(val);
            });
            
            container.appendChild(labelDiv);
            container.appendChild(input);
            
            return container;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function updateCategoryDisplay(category, container) {
            const valuesDiv = container.querySelector('.category-values') || document.createElement('div');
            if (!container.querySelector('.category-values')) {
                valuesDiv.className = 'category-values';
                container.appendChild(valuesDiv);
            }
            
            const xColor = wellBeingQuiz.getColorForValue(category.x);
            const yColor = wellBeingQuiz.getColorForValue(category.y);
            
            valuesDiv.innerHTML = `
                <div class="value-badge value-x" style="background: ${xColor}20; color: ${xColor};">
                    <i class="fas fa-heart"></i> ${category.x.toFixed(1)}
                </div>
                <div class="value-badge value-y" style="background: ${yColor}20; color: ${yColor};">
                    <i class="fas fa-bolt"></i> ${category.y.toFixed(1)}
                </div>
            `;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —ç–º–æ–¥–∑–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
            const emojiDiv = container.querySelector('.mood-emojis') || document.createElement('div');
            if (!container.querySelector('.mood-emojis')) {
                emojiDiv.className = 'mood-emojis';
                container.appendChild(emojiDiv);
            }
            
            const avgValue = (category.x + category.y) / 2;
            let moodEmoji = 'üòê';
            if (avgValue >= 3) moodEmoji = 'üòä';
            else if (avgValue >= 0) moodEmoji = 'üôÇ';
            else if (avgValue >= -3) moodEmoji = 'üòï';
            else moodEmoji = 'üòû';
            
            emojiDiv.innerHTML = `
                <span>${moodEmoji}</span>
                <span>${category.icon}</span>
                <span>${avgValue >= 0 ? 'üëç' : 'üëé'}</span>
            `;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –º–∞—Ä–∫–µ—Ä–∞ –Ω–∞ —Å–µ—Ç–∫–µ
        function updateGridMarker(category, container) {
            const grid = container.querySelector('.coordinate-grid');
            if (grid) {
                const marker = grid.querySelector('.grid-marker');
                const half = 125; // gridSize / 2
                const left = half + (category.x / 5) * half;
                const top = half - (category.y / 5) * half;
                marker.style.left = `${Math.min(250, Math.max(0, left))}px`;
                marker.style.top = `${Math.min(250, Math.max(0, top))}px`;
                marker.style.background = wellBeingQuiz.getColorForValue((category.x + category.y) / 2);
            }
        }

        // –ü–æ–∫–∞–∑ —É—Ç–æ—á–Ω—è—é—â–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞
        function showClarifyingQuestion(category) {
            const questionDiv = document.createElement('div');
            questionDiv.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: var(--card-bg);
                padding: 25px;
                border-radius: 15px;
                border: 2px solid var(--primary);
                box-shadow: 0 10px 40px rgba(0,0,0,0.3);
                z-index: 1100;
                max-width: 400px;
                width: 90%;
            `;
            
            const randomQuestion = category.questions[Math.floor(Math.random() * category.questions.length)];
            
            questionDiv.innerHTML = `
                <h3 style="color: var(--primary); margin-bottom: 15px;">–£—Ç–æ—á–Ω—è—é—â–∏–π –≤–æ–ø—Ä–æ—Å</h3>
                <p style="font-size: 1.2rem; margin-bottom: 20px;">${randomQuestion.text}</p>
                <div style="display: flex; gap: 10px; justify-content: center;">
                    <button class="quiz-btn" onclick="this.closest('div').remove()" style="background: var(--primary);">–ü–æ–Ω—è—Ç–Ω–æ</button>
                </div>
            `;
            
            document.body.appendChild(questionDiv);
            
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É–¥–∞–ª—è–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                if (questionDiv.parentNode) questionDiv.remove();
            }, 3000);
        }

        // –†–µ–Ω–¥–µ—Ä —Ç–µ–∫—É—â–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        function renderCurrentCategory() {
            const container = document.getElementById('newQuizContent');
            container.innerHTML = '';
            
            const category = wellBeingQuiz.categories[currentCategoryIndex];
            
            const categoryDiv = document.createElement('div');
            categoryDiv.className = 'quiz-category';
            
            // –ó–∞–≥–æ–ª–æ–≤–æ–∫
            const header = document.createElement('div');
            header.className = 'category-header';
            header.innerHTML = `
                <div class="category-icon">${category.icon}</div>
                <div class="category-title">${category.name}</div>
            `;
            
            categoryDiv.appendChild(header);
            
            // –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–Ω–∞—è —Å–µ—Ç–∫–∞
            const grid = createCoordinateGrid(category, categoryDiv);
            categoryDiv.appendChild(grid);
            
            // –ü–æ–ª–∑—É–Ω–∫–∏
            const sliders = createSliders(category, categoryDiv);
            categoryDiv.appendChild(sliders);
            
            container.appendChild(categoryDiv);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
            updateNavigationButtons();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            updateProgress();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
        function updateNavigationButtons() {
            const prevBtn = document.getElementById('newPrevBtn');
            const nextBtn = document.getElementById('newNextBtn');
            const submitBtn = document.getElementById('newSubmitBtn');
            
            prevBtn.disabled = currentCategoryIndex === 0;
            
            if (currentCategoryIndex === wellBeingQuiz.categories.length - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'block';
            } else {
                nextBtn.style.display = 'block';
                submitBtn.style.display = 'none';
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –≤—Å–µ –ª–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ü–µ–Ω–µ–Ω—ã
            const allRated = wellBeingQuiz.categories.every(cat => cat.x !== 0 || cat.y !== 0);
            document.getElementById('completionIndicator').style.display = allRated ? 'flex' : 'none';
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress() {
            const progress = ((currentCategoryIndex + 1) / wellBeingQuiz.categories.length) * 100;
            document.getElementById('quizProgress').style.width = `${progress}%`;
        }

        // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function showNewResults() {
            const totalScore = wellBeingQuiz.calculateTotalScore();
            const result = wellBeingQuiz.getResultByScore(totalScore);
            
            document.getElementById('fullscreenQuiz').classList.remove('active');
            document.getElementById('resultsQuiz').classList.add('active');
            
            document.getElementById('finalMoodEmoji').textContent = result.emoji;
            document.getElementById('finalScore').textContent = `${totalScore.toFixed(1)}/15`;
            
            // –°–ø–∏—Å–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
            const list = document.getElementById('finalRecommendationsList');
            list.innerHTML = '';
            result.tips.forEach(tip => {
                const li = document.createElement('li');
                li.innerHTML = `<i class="fas fa-check-circle"></i> ${tip}`;
                list.appendChild(li);
            });
            
            // –î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            const breakdown = document.getElementById('categoryBreakdown');
            breakdown.innerHTML = '<h4 style="color: var(--primary); margin-bottom: 10px;">–î–µ—Ç–∞–ª—å–Ω—ã–π —Ä–∞–∑–±–æ—Ä:</h4>';
            
            wellBeingQuiz.categories.forEach(cat => {
                const avg = (cat.x + cat.y) / 2;
                const color = wellBeingQuiz.getColorForValue(avg);
                breakdown.innerHTML += `
                    <div style="display: flex; justify-content: space-between; margin: 5px 0; padding: 5px; background: ${color}10; border-radius: 5px;">
                        <span>${cat.icon} ${cat.name}:</span>
                        <span style="color: ${color}; font-weight: bold;">${avg.toFixed(1)}</span>
                    </div>
                `;
            });
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫—Ä—É–≥–∞
            window.lastQuizResult = {
                score: totalScore,
                title: result.title,
                emoji: result.emoji
            };
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ API (Relox)
            saveToRelox(totalScore);
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ API Relox
        function saveToRelox(score) {
            const userId = 123456789;
            const apiBase = "http://192.168.0.15:5000";
            
            // –°–æ–±–∏—Ä–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            const profileData = {
                x: score,
                y: score,
                timestamp: new Date().toISOString(),
                categories: wellBeingQuiz.categories.map(c => ({
                    id: c.id,
                    x: c.x,
                    y: c.y
                }))
            };
            
            fetch(`${apiBase}/profile/${userId}`, {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify(profileData)
            })
            .then(res => res.json())
            .then(data => {
                if (data.status === "success") {
                    console.log("–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Relox");
                }
            })
            .catch(err => console.error("–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:", err));
        }

        // –°–±—Ä–æ—Å —Ç–µ—Å—Ç–∞
        function resetNewQuiz() {
            wellBeingQuiz.categories.forEach(cat => {
                cat.x = 0;
                cat.y = 0;
            });
            currentCategoryIndex = 0;
            
            document.getElementById('resultsQuiz').classList.remove('active');
            document.getElementById('fullscreenQuiz').classList.remove('active');
            document.body.style.overflow = 'auto';
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≥–ª–∞–≤–Ω—ã–π –∫—Ä—É–≥
            document.getElementById('mainCircle').classList.remove('hidden');
            document.getElementById('resultCircle').classList.add('hidden');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ä–æ—Å–æ–≤
        function initNewQuizSystem() {
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫
            document.getElementById('mainCircle').addEventListener('click', () => {
                document.getElementById('mainCircle').classList.add('hidden');
                document.getElementById('fullscreenQuiz').classList.add('active');
                document.body.style.overflow = 'hidden';
                renderCurrentCategory();
            });
            
            document.getElementById('newPrevBtn').addEventListener('click', () => {
                if (currentCategoryIndex > 0) {
                    currentCategoryIndex--;
                    renderCurrentCategory();
                }
            });
            
            document.getElementById('newNextBtn').addEventListener('click', () => {
                if (currentCategoryIndex < wellBeingQuiz.categories.length - 1) {
                    currentCategoryIndex++;
                    renderCurrentCategory();
                }
            });
            
            document.getElementById('newSubmitBtn').addEventListener('click', showNewResults);
            
            document.getElementById('newCloseQuizBtn').addEventListener('click', () => {
                document.getElementById('resultsQuiz').classList.remove('active');
                document.body.style.overflow = 'auto';
                showResultCircle();
            });
            
            document.getElementById('redoQuizBtn').addEventListener('click', () => {
                resetNewQuiz();
            });
            
            document.getElementById('resultCircle').addEventListener('click', resetNewQuiz);
        }

        // –ü–æ–∫–∞–∑ –∫—Ä—É–≥–∞ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
        function showResultCircle() {
            if (!window.lastQuizResult) return;
            
            document.getElementById('resultEmoji').textContent = window.lastQuizResult.emoji;
            document.getElementById('resultTitle').textContent = window.lastQuizResult.title;
            document.getElementById('resultScore').textContent = `${window.lastQuizResult.score.toFixed(1)}/15`;
            
            document.getElementById('mainCircle').classList.add('hidden');
            document.getElementById('resultCircle').classList.remove('hidden');
        }

        // ==================== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ====================
        document.addEventListener('DOMContentLoaded', function() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã
            initThemeSwitcher();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –æ–ø—Ä–æ—Å–æ–≤
            initNewQuizSystem();
            
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤–∏–¥–∂–µ—Ç–æ–≤ (–≤–∞—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏)
            if (typeof initTasksWidget === 'function') initTasksWidget();
            if (typeof initWorld
